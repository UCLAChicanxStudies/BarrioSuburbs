define("collections/articles",["jquery","underscore","backbone","models/article"],function(e,c,n,o){"use strict";var r=n.Collection.extend({model:o});return r});
define("collections/timeline",["jquery","underscore","backbone","models/map/layer/timeline/item"],function(e,n,i,t){"use strict";var l=i.Collection.extend({model:t});return l});
define("controllers/issue",["jquery","underscore","backbone","controllers/prototype","mixins/asyncInit","views/issue","models/issue"],function(e,n,i,o,r,t,l){"use strict";var c=o.extend({model:null,view:null,router:null,initialize:function(i){var o=this;o.$def=e.Deferred(),o.router=i.router,o.model=new l({config:i.config}),o.view=new t({model:o.model,config:i.config}),o.view.render(),o.model.init().done(function(){n.forEach(o.model.get("collection").models,function(e){o.listenTo(e,"active",function(e){var n="article/"+e.get("articleid");o.router.navigate(n,{trigger:!0}),o.view.renderArticle(e)})}),o.$def.resolve(o)}).always(function(){o.$def.reject()})}});return n.extend(c.prototype,r),c});
define("controllers/map",["jquery","underscore","backbone","controllers/prototype","models/map","views/map","mixins/asyncInit","controllers/map/pan","controllers/map/layer"],function(e,o,r,n,a,p,i,t,l,u){"use strict";var s=n.extend({model:null,view:null,issue:null,config:null,mapPanController:null,MapLayerController:null,mapTimelineController:null,initialize:function(o){var r=this;r.$def=e.Deferred(),r.config=o.config,r.router=o.router,r.issue=o.issue,r.model=new a(o),r.view=new p({model:r.model,router:r.router,issue:r.issue}),r.view.init().done(function(){r.mapPanController=new t({map:r.view.map}),r.mapLayerController=new l({view:r.view,map:r.view.map,model:r.model,mapconfig:r.model.attributes.mapconfig,controlsconfig:r.config.controls}),r.listenTo(r.view,"markers",function(e){r._registerMarkers(e),r.mapPanController.fitMarkerBounds(r.view.markerViews)}),r.view.render()}),e.when.apply(null,[r.model.init(),r.view.init()]).done(function(){r.$def.resolve(r)})},_registerMarkers:function(e){var r=this;o.forEach(e,function(e){r.listenTo(e.model,"active",function(o){r.mapPopupOpen(e.markerLayer);var n=r._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&r.mapPanController.handlePopupPosition(n.getPopup())}),r.listenTo(e.model,"toggle",function(o){r.mapPopupToggle(e.markerLayer);var n=r._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&r.mapPanController.handlePopupPosition(n.getPopup())}),r.listenTo(e,"click",function(o){r.mapPopupOpen(o),e.model.trigger("active",e.model)}),r.listenTo(e,"mouseover",function(e){r.view.map.hoverPopup&&(openpopup[popupid(mapMarker.getLatLng())]||mapMarker.openPopup())})})},_getMarkerLayer:function(e,r){var n,a;if(e instanceof L.LayerGroup){if(r in e)n=e;else for(a=e.getLayers();e=a.pop();)if(r in e){n=e;break}}else o.has(e,"originalEvent")&&(n=e.target);return n},mapPopupOpen:function(e){var o=this._getMarkerLayer(e,"openPopup");o&&o.openPopup()},mapPopupToggle:function(e){var o=this._getMarkerLayer(e,"togglePopup");o&&o.togglePopup()},mapPopupClose:function(e){var o=this._getMarkerLayer(e,"closePopup");o&&o.closePopup()}});return o.extend(s.prototype,i),s});
define("controllers/prototype",["underscore","backbone"],function(e,t){"use strict";var n=function(){this.cid=e.uniqueId("controller"),this.initialize.apply(this,arguments)};return n.extend=t.Router.extend,e.extend(n.prototype,t.Events),e.extend(n.prototype,{initialize:function(){throw new Error("unimplemented initialize()")}}),n});
define("controls/L.Control.Timeline",["leaflet","d3"],function(t,i){return t.Control.Timeline?t:(t.Control.Timeline=t.Control.extend({options:{orientation:"left",height:500,width:100,margin:{left:3,right:3,top:10,bottom:5},collapsed:!0,item:{minHeight:1},on:null,title:"Timeline",position:"topleft"},initialize:function(i,e,n){var o=this;t.Util.setOptions(this,n),this._map=i,this._source=e;var l=this._container=t.DomUtil.create("div","leaflet-control-timeline leaflet-control");if(this.options.collapsed){t.DomUtil.addClass(l,"leaflet-control-timeline-collapsed");var s=this._toggle=t.DomUtil.create("a","leaflet-control-timeline-toggle",l);s.title=this.options.title,s.link="#";var a=function(){o._expand()};t.Browser.touch?t.DomEvent.on(s,"click",t.DomEvent.stop).on(s,"click",a,this):t.DomEvent.on(s,"click",a)}else t.DomUtil.addClass(l,"leaflet-control-timeline-expanded");return t.Browser.touch?t.DomEvent.on(this._container,"click",t.DomEvent.stopPropagation):t.DomEvent.disableClickPropagation(this._container),l},onRemove:function(){},onAdd:function(t){return this._container},_expand:function(){var e=this;if(!e._expanded&&(e._expanded=!0,this._map.on("click",this._collapse,this),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.addClass(this._container,"leaflet-control-timeline-expanded"),!this._timeline)){var n=this.options.height-this.options.margin.top-this.options.margin.bottom,o=this.options.width-this.options.margin.right-this.options.margin.left,l=(this._xScale=i.scale.linear().range([0,o]),this._yScale=i.scale.linear().domain([this._source.start,this._source.end]).range([0,n])),s=this._timeline=i.select(".leaflet-control-timeline").append("svg").attr("id","timeline").attr("height",this.options.height).attr("width",this.options.width),a=s.append("g").attr("id","band").attr("width",o/2-this.options.margin.right).attr("height",n).attr("transform","translate("+.25*o+","+this.options.margin.top+") scale(.75 1.0)"),r=(a.selectAll("g").data(this._source.getItems()).enter().append("rect").attr("class","timeline-item").attr("height",function(t){return i.max([e.options.item.minHeight,l(t.duration())])}).attr("width",o).attr("transform",function(t){return"translate(0, "+l(t.start)+")"}),this._brush=i.svg.brush().y(l).on("brushend",function(){var t=l(r.extent()[0]),n=l(r.extent()[1]),o={clear:!1,selected:[]};t!==n?i.select("#band").selectAll("rect.timeline-item").each(function(i){l(i.start)<=n&&l(i.end)>=t&&o.selected.push(i)}):o.clear=!0,e.options.on.brushend(o)})),c=a.append("svg").attr("id","brush").call(r);c.selectAll("rect").attr("width",o);var h=s.append("g").attr("id","axis").attr("transform","translate("+(.25*o-this.options.margin.left)+","+this.options.margin.top+")"),p=i.svg.axis().scale(l).orient(this.options.orientation).tickSize(6,0).tickValues(this._source.tickValues()).tickFormat(function(t){return e._source.tickFormat(t)});h.call(p)}},_collapse:function(){this._expanded&&((this.options.on.collapse||"function"==typeof this.options.on.collapse)&&this.options.on.collapse(),this._expanded=!1,t.DomUtil.addClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-expanded"),this._map.off("click",this._collapse,this))}}),void(t.control.timeline=function(i,e,n){return new t.Control.Timeline(i,e,n)}))});
define("mixins/asyncInit",["jquery","underscore"],function(n,e){"use strict";var i={$def:null,init:function(){return this.$def.promise()}};return i});
define("mixins/domwatcher",["jquery"],function(e){"use strict";var t={watchDOM:function(t,o,n){if(!o)throw"Empty selector in watchDOM()";if(0===e(o).length){var d=function(){e(o).length>0&&(e(document.body).off("DOMNodeInserted",d),n.resolve())};e(document.body).on("DOMNodeInserted",d),window.setTimeout(function(){e(document.body).off("DOMNodeInserted",d),n.reject()},t)}else n.resolve()}};return t});
define("mixins/fetchxml",["jquery"],function(e){"use strict";var r={fetchXML:function(r){var t=e.Deferred();return e.ajax({type:"GET",url:r,dataType:"xml",success:function(e){t.resolve(e)},error:function(e,r,n){t.reject()}}),t.promise()}};return r});
define("mixins/xml2html",["jquery","underscore"],function(e,t){"use strict";var r={_doc:function(e){var t;if("string"==typeof e)t=(new DOMParser).parseFromString(e,"text/xml");else{if(!(e instanceof Document))throw new Error("Unrecognized document input in XML2HTML");t=e}if(null==t||!t.hasOwnProperty("getElementsByTagName")&&t.getElementsByTagName("parsererror").length>0)throw new Error("Failed to parse document in xml2html");return t},xml2html:function(e,r,n,o){var i=this._doc(e),m=this._doc(r),a=new XSLTProcessor;a.importStylesheet(m),"object"==typeof n&&t.each(t.keys(n),function(e){a.setParameter(null,e,n[e])});var s;try{var c=a.transformToDocument(i);s=-1!=navigator.userAgent.indexOf("Firefox")?"text"===o?c.documentElement.textContent:c.documentElement:"text"===o?c.documentElement.textContent:s=c.body.innerHTML}catch(u){throw new Error("Error in XSLT transform: "+u.toString())}return s}};return r});
define("models/article",["jquery","underscore","backbone","mixins/fetchxml","mixins/asyncInit","mixins/xml2html","text!xsl/geojson.xsl","text!xsl/cited-range.xsl"],function(e,t,n,o,s,i,r,l){"use strict";var a=n.Model.extend({initialize:function(){var t=this;t.$def=e.Deferred();var n=t.fetchXML(t.get("path"));e.when(n).done(function(e){t.set("xml",e),t._mkGeojson(),t._mkCitedRange(),null!==t.geojson&&t.set("placeType",t.geojson.properties.layer),t.$def.resolve(t)}).fail(function(){t.$def.reject()})},defaults:{xml:null,placeType:null,iconUrl:"",citedRange:{}},geojson:null,getGeojson:function(){return null===this.geojson&&this._mkGeojson(),this.geojson},_mkGeojson:function(){try{var e=this.xml2html(this.get("xml"),r,{},"text");this.geojson=JSON.parse(e)}catch(t){throw new Error("Failed to parse geojson: "+t.toString())}},_mkCitedRange:function(){try{var e=this.xml2html(this.get("xml"),l,{},"text");this.set("citedRange",JSON.parse(e))}catch(t){throw new Error("Failed to parse cited range json: "+t.toString())}}});return t.extend(a.prototype,o),t.extend(a.prototype,s),t.extend(a.prototype,i),a});
define("models/issue",["jquery","underscore","backbone","models/article","collections/articles","mixins/asyncInit"],function(e,t,n,i,r,o){"use strict";var c=n.Model.extend({initialize:function(n){var o=this;o.$def=e.Deferred();var c=n.config.articles.pathBase;c.match(/\/$/)||(c+="/");var a=n.config.articles.files,s=new r;o.config=n.config,o.set("collection",s);var f=t.map(t.range(a.length),function(){return void 0});t.each(a,function(e,t){f[t]=new i({articleid:t,articledir:c,path:c+e})});var l=t.map(f,function(e){return e.init()});e.when.apply(null,l).done(function(){s.add(f),o.setIcons(),o.$def.resolve(o)}).always(function(){t.forEach(l,function(e){"rejected"===e.state()&&o.$def.reject()}),o.$def.reject()})},setIcons:function(){var e=this,n=e.config.markers.icons,i=t.shuffle(t.flatten(t.map(n,function(e){return t.map(e.files,function(t){return e.dir.concat(t)})}))),r=i.pop(),o=[];e.get("collection").forEach(function(e,t){var n=e.getGeojson()||{properties:{}},c=n.properties.layer;o[c]=o[c]||i.pop()||r,e.set("iconUrl",o[c])})},getArticle:function(e){var t,n=this.get("collection");return"object"==typeof e?t=e:("number"==typeof e||"string"==typeof e)&&(t=n.at(e)),t}});return t.extend(c.prototype,o),c});
define("models/map",["jquery","underscore","backbone","mixins/asyncInit"],function(e,n,i,o){"use strict";var t=i.Model.extend({initialize:function(n){var i=this;i.$def=e.Deferred(),e.getJSON(n.config.map.config,function(e){i.set("mapconfig",e),i.$def.resolve(i)}).fail(function(e,n,o){console.log("Failed to load map config file: "+o),i.$def.reject()})},defaults:{mapconfig:{}}});return n.extend(t.prototype,o),t});
define("routes/router",["jquery","underscore","backbone","models/error/user","views/error/user","views/clear","controllers/issue","controllers/map","views/menu"],function(e,r,i,t,n,o,s,a,l){"use strict";var u=i.Router.extend({pages:{},config:{},issueController:null,mapController:null,initialize:function(e){var t=this;this.config=e.config,this.pages=e.config.pages,this.issueController=new s({router:this,config:this.config}),this.issueController.init().done(function(){r.has(t.pages.router,"history")&&t.pages.router.history&&i.history.start()})},navigate:function(e,r){i.history.fragment!==e&&i.history.navigate(e,r)},page:function(e){var i,t=this,n=!1;try{if(e||(e=this.pages.home),i=this.pages.pages[e],void 0===i)throw new Error("Missing config in router/page")}catch(s){return this.page("404")}(new o).render(),r.each(i,function(i){var o,s={config:t.config,issue:t.issueController.model,router:t},l=JSON.parse(JSON.stringify(i));if(r.has(l,"view"))o=l.view;else{if(!r.has(l,"partial")){if(r.has(confg,"full"))return void(window.location.href=l.full.page);throw new Error("Unsupported page type in router: "+e)}o="views/partial",l.partial.page=t.pages.pathBase+l.partial.page,s=r.extend(s,l.partial)}"views/map"===o?(t.mapController=new a(s),n=!0):require([o],function(e){var r=new e(s);r.render()})}),n||(t.mapController=null)},article:function(r){var i=this,t={config:i.config,issue:i.issueController.model,router:i};e("#titlepage").length>0&&e("#titlepage").remove(),e("#page").length>0&&e("#page").remove(),null===i.mapController&&(i.mapController=new a(t)),0===e("#menu").children().length&&new l(t).render(),i.mapController.init().done(function(){var e=i.issueController.model.getArticle(r);e.trigger("active",e)})}});return u});
define("views/app",["jquery","underscore","backbone"],function(e,n,i){"use strict";var o=i.View.extend({el:"body",initialize:function(){e(window).resize(function(){document.location.reload()})}});return o});
define("views/article",["jquery","underscore","backbone","views/article/gallery","mixins/xml2html","text!xsl/article.xsl"],function(e,i,t,r,l,o){"use strict";var n=t.View.extend({id:"article",initialize:function(e){var i=this;i.config=e.config},render:function(){var i=this;if(i.$el=e("#"+i.id),0===i.$el.find("#"+i.model.cid).length){var t=this.xml2html(this.model.get("xml"),o,{"article-dir":i.config.articles.pathBase,iconUrl:i.model.get("iconUrl"),cid:i.model.cid});try{e(".article-content").remove(),e("#"+this.id).append(t)}catch(l){console.log("article load error: "+l.toString())}return e("img.slidesjs-slide").length>0?(new r).render():(e("#footer").remove(),e("article").removeClass("before-footer").addClass("no-footer")),i.$el.find(".article-marker").click(function(e,t){i.model.trigger("toggle",i.model)}),i}},remove:function(){}});return i.extend(n.prototype,l),n});
define("views/clear",["jquery","underscore","backbone"],function(e,n,r,t){"use strict";var c=r.View.extend({el:"body",render:function(){e("body").empty()}});return c});
define("views/issue",["jquery","underscore","backbone","text!partials/issue.html","views/article"],function(e,i,t,n,r){"use strict";var s=t.View.extend({el:"#issue",template:i.template(n),initialize:function(e){var i=this;i.config=e.config},render:function(){this.$el.remove(),e("body").append(n)},renderArticle:function(e){new r({model:e,config:this.model.config,issue:this,router:this.model.router}).render()}});return s});
define("views/map",["jquery","underscore","backbone","leaflet","text!partials/map.html","views/marker","mixins/asyncInit"],function(e,i,n,a,r,t,m){"use strict";var o=n.View.extend({id:"map",tagName:"div",markerViews:[],mapconfig:{},initialize:function(i){var n=this;n.$def=e.Deferred(),n.model=i.model,n.issue=i.issue,e.when.apply({},[n.issue.init(),n.model.init()]).done(function(){n.mapconfig=n.model.get("mapconfig"),e("#"+this.id).length>0||e("#"+this.id).children().length>0||(n._initMap(),n.$def.resolve(n))})},_initMap:function(){var n=this;0===e("#"+this.id).length&&(e("body").append(r),n.map=new a.Map(n.mapconfig.id,n.mapconfig.map),new a.TileLayer(n.mapconfig.tileLayer.url,n.mapconfig.tileLayer.opts).addTo(n.map),new a.control.scale(n.mapconfig.scale).addTo(n.map),n.markerViews=i.map(n.issue.get("collection").models,function(e){return new t({model:e,map:n.map,mapconfig:n.mapconfig})}))},renewViews:function(){var e=this;e.markerViews=i.map(e.issue.get("collection").models,function(i){return i.markerView||(i.markerView=new t({model:i,map:e.map,mapconfig:e.mapconfig})),i.markerView}),i.forEach(e.markerViews,function(e){e.render()}),e.trigger("markers",e.markerViews)},render:function(){var e=this;e._initMap(),i.forEach(e.markerViews,function(e){e.render()}),e.trigger("markers",e.markerViews)}});return i.extend(o.prototype,m),o});
define("views/marker",["jquery","underscore","backbone","text!partials/marker.html","text!partials/marker-legend.html"],function(e,r,t,i,n){"use strict";var o=t.View.extend({template:r.template(i),el:"",markerLayer:null,map:null,mapconfig:null,initialize:function(e){var r=this;r.map=e.map,r.mapconfig=e.mapconfig,r.initMarkerLayer()},initMarkerLayer:function(){var e=this,r=this.model.getGeojson(),t=e.mapconfig.features.icon;t.iconUrl=this.model.get("iconUrl")||"";var i=L.icon(t);e.markerLayer=L.geoJson(r,{onEachFeature:function(r,t){var i=L.popup(e.mapconfig.features.popup);i.setContent(e.template({articleid:e.model.get("articleid"),geojson:e.model.getGeojson()})),t.bindPopup(i),t.removeEventListener("click"),t.on("click",function(r){e.trigger("click",r)}),t.on("mouseover",function(r){e.trigger("mouseover",r)})},pointToLayer:function(r,t){return L.marker(t,{icon:i,clickable:!!r.properties.text,title:r.properties.markername||"",opacity:e.mapconfig.features.opacity,riseOnHover:e.mapconfig.features.riseOnHover})}})},render:function(){this.markerLayer.addTo(this.map)}});return o});
define("views/menu",["jquery","underscore","backbone","text!partials/menu.html","mixins/domwatcher","views/article/menu"],function(e,t,n,i,r,o){"use strict";var a=n.View.extend({template:t.template(i),id:"menu",tagName:"div",issue:null,config:{},initialize:function(e){this.config=e.config,this.issue=e.issue},render:function(){var n=this;if(0===e("#"+n.id).children().length){var i=this.config.menu,r=[],a={},c={};t.each(i,function(e){if(a[e.partial]="","menu"===e.type){if("collections/articles"!==e.collection)throw new Error("Unhandled collection type requested: "+e.collection);c[e.collection]=n.issue.get("collection")}}),t.each(t.keys(a),function(n){var i=e.Deferred();require(["text!"+n],function(e){a[n]=t.template(e),i.resolve()}),r.push(i.promise())});var l="";e.when.apply(e,r).done(function(){t.forEach(i,function(n,i){var r=n.partial,u={},s="",f=[];"page"===n.type||"sep"===n.type?l+=a[r](n):"menu"===n.type&&(c[n.collection].models.forEach(function(t,i){var r,a=n.item.href.replace(":i",i),c=new o({model:t}),l=c.render({href:"#"+a});if("string"==typeof l)r=e(l);else{if(!(l instanceof Element))throw new Error("Unsupported result type for submenu: "+l.toString());if("BODY"===l.nodeName)r=e(l.innerHTML);else{if("LI"!==l.nodeName)throw new Error("Unsupported document element for submenu: "+l.toString());r=e(l.outerHTML)}}r.attr("data-sort-key")?u[r.attr("data-sort-key")]=r.clone():u[r.find("a").text()]=r.clone()}),f=t.keys(u),f.sort(function(e,t){return e.localeCompare(t)}),t.each(f,function(e){s+=u[e][0].outerHTML}),l+=a[r]({label:n.label,items:s}))})}).then(function(){e("#"+n.id).empty().append(n.template({content:l}));var t=e.Deferred();t.fail(function(){n.render()}),n.watchDOM(500,"#"+n.id,t)}).fail(function(){throw new Error("Failed to build menu.")})}}});return t.extend(a.prototype,r),a});
define("views/page",["jquery","underscore","backbone","mixins/domwatcher","text!partials/page.html"],function(e,t,n,r,i){"use strict";var a=n.View.extend({el:"body",render:function(){var t=this,n=e.Deferred();n.then(function(){e(t.el).append(i)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,r),a});
define("views/partial",["jquery","underscore","backbone","mixins/domwatcher","mixins/asyncInit"],function(e,t,n,i,r){"use strict";var a=n.View.extend({el:"",page:"",initialize:function(t){var n=this;n.el=t.el,n.$def=e.Deferred(),require(["text!"+t.page],function(e){n.page=e,n.$def.resolve(n)})},render:function(){var t=this,n=e.Deferred();t.init().then(function(){e(t.el).append(t.page)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,i),t.extend(a.prototype,r),a});
define("controllers/map/layer",["jquery","underscore","backbone","controllers/prototype","controllers/map/layer/placetype","controllers/map/layer/timeline"],function(e,r,o,n,t,i){"use strict";var a=n.extend({view:null,router:null,map:null,controlsconfig:null,initialize:function(e){var o=this;o.map=e.map,o.view=e.view,o.model=e.model,o.controlsconfig=e.controlsconfig,o.subControllers=[],r.has(o.controlsconfig,"placetype")&&o.controlsconfig.placetype.enable&&o.subControllers.push(new t({views:o.view.markerViews,map:o.view.map,mapconfig:o.model.attributes.mapconfig})),r.has(o.controlsconfig,"timeline")&&o.controlsconfig.timeline.enable&&o.subControllers.push(new i({markerViews:o.view.markerViews,map:o.view.map,siteconfig:o.model.attributes.config})),r.forEach(o.subControllers,function(e){o.listenTo(e,"filter",function(){o._updateMarkers()})})},_updateMarkers:function(){var e=this,o=[],n=[];r.forEach(e.subControllers,function(e){var o=e.getFilterState();n.push(o.hide),n=r.flatten(n)}),r.forEach(e.view.markerViews,function(e){var t=r.find(n,function(r){r===e.markerLayer});t||o.push(e.markerLayer)}),r.forEach(o,function(r){e.view.map.addLayer(r)}),r.forEach(n,function(r){e.view.map.removeLayer(r)})}});return a});
define("controllers/map/pan",["jquery","underscore","backbone","controllers/prototype","mixins/domwatcher"],function(t,e,n,o,i){"use strict";var a=o.extend({map:null,initialize:function(t){if(this.map=t.map,!this.map)throw new Error("Uninitialized map")},_fitMarkerBounds:function(t){var n=this,o=document.getElementById("article");if(o){var i=L.DomUtil.getViewportOffset(o).x,a=L.latLngBounds(e.map(t,function(t){var e=t.model.getGeojson().geometry.coordinates.slice(0);return L.latLng(e.reverse())}));0===i?n.map.fitBounds(a):i!=n.map.getSize().x?n.map.fitBounds(a,{paddingBottomRight:[document.body.clientWidth-i,0]}):n.map.fitBounds(a),n.map.invalidateSize()}},fitMarkerBounds:function(e){var n=this,o=t.Deferred();o.then(function(){n._fitMarkerBounds(e)}),this.watchDOM(1e3,"#article",o)},handlePopupPosition:function(e){var n,o,i,a,r,p=this,d=p.map,s=t(e.getContent()).attr("id");i=e.getLatLng(),void 0!==i&&(n=L.DomUtil.getViewportOffset(document.getElementById("article")).x,o=t("#"+s).closest(".leaflet-popup-content-wrapper").first(),r=L.point(e.options.autoPanPaddingBottomRight||e.options.autoPanPadding),r=r?r.x:0,a=o.length>0?o.offset().left+o.width()+r:0,0!=n&&a>n&&n!=d.getSize().x?d.panBy([a-n,0]):d.getBounds().contains(e.getLatLng())||(d.closePopup(e),d.openPopup(e)))}});return e.extend(a.prototype,i),a});
define("models/error/user",["backbone"],function(e){"use strict";var s=e.Model.extend({defaults:{msg:""},initialize:function(e){this.set("msg",e.message)}});return s});
define("views/article/gallery",["jquery","underscore","backbone","views/article/gallery/popover","views/article/gallery/lightbox","views/article/gallery/slides"],function(e,i,r,n,l,a){"use strict";var o=r.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=e("#article article").height()-e("#header").outerHeight(!0);e("#body").css({height:i});var r=[];e("img.slidesjs-slide").each(function(i,n){var l=e.Deferred();e(n).load(function(){e(n).removeClass("remove"),l.resolve()}),e(n).error(function(){window.setTimeout(function(){l.reject()},500)}),r.push(l)}),e.when.apply({},r).always(function(){e("img.slidesjs-slide.remove").remove(),e(".image-loading").removeClass("image-loading"),(new n).render(),(new l).render(),(new a).render()})}});return o});
define("views/article/menu",["jquery","underscore","backbone","mixins/xml2html","text!xsl/article-menu.xsl"],function(e,t,i,n,r){"use strict";var l=i.View.extend({render:function(e){var t=this;if("resolved"!==this.model.init().state())throw"Uninitialized article in ArticleMenuView";var i=t.xml2html(t.model.get("xml"),r,e);return i}});return t.extend(l.prototype,n),l});
define("views/error/user",["jquery","backbone","text!partials/error/user.html"],function(e,t,r){"use strict";var i=t.View.extend({template:_.template(r),el:e("#errorDialog"),initialize:function(){this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)),this.$el.modal({keyboard:!0,show:!0}),this}});return i});
define("controllers/map/layer/placetype",["jquery","underscore","backbone","controllers/prototype","text!partials/marker-legend.html"],function(e,r,t,n,o){"use strict";var l=n.extend({views:null,router:null,map:null,control:null,initialize:function(t){var n=this;n.views=t.views,n.map=t.map,n.mapconfig=t.mapconfig;var l=r.template(o),a=r.groupBy(n.views,function(e){return e.model.getGeojson().properties.layer}),i=n.control=L.control.layers(null,null,n.mapconfig.control.layers.options).addTo(n.map),c=i.getContainer();r.forEach(Object.keys(c),function(e){e.match("mouseover")&&c.removeEventListener("mouseover",c[e]),e.match("mouseout")&&c.removeEventListener("mouseout",c[e])}),L.DomEvent.on(e(".leaflet-control-layers-toggle")[0],"click",i._expand,i),r.each(r.keys(a),function(e){var t=e.replace(/\s+/g,"-"),n=l({iconUrl:a[e][0].model.get("iconUrl"),title:e,klass:t}),o=r.map(a[e],function(e){return e.markerLayer}),c=L.layerGroup(o);i.addOverlay(c,n)}),e("input.leaflet-control-layers-selector").each(function(r,t){e(t).click()}),i.mapLayerController=n,i._onInputClick=n._onInputClick},getFilterState:function(){return{show:this.show||[],hide:this.hide||[]}},_onInputClick:function(){var e,r,t,n=this,o=[],l=[],a=n._form.getElementsByTagName("input"),i=a.length;for(n._handlingClick=!0,e=0;i>e;e++)r=a[e],t=n._layers[r.layerId],t.layer.getLayers().forEach(r.checked?function(e){o.push(e)}:function(e){l.push(e)});n._handlingClick=!1,n._refocusOnMap(),n.mapLayerController.show=o,n.mapLayerController.hide=l,n.mapLayerController.trigger("filter")}});return l});
define("controllers/map/layer/timeline",["jquery","underscore","backbone","controllers/prototype","views/map/layer/timeline","models/map/layer/timeline"],function(e,r,i,n,t,a){"use strict";var l=n.extend({map:null,model:null,view:null,siteconfig:null,markerViews:null,initialize:function(e){var r=this;r.views=e.views,r.map=e.map,r.markerViews=e.markerViews,r.model=new a({siteconfig:e.siteconfig,markerViews:e.markerViews}),r.view=new t({model:r.model,map:r.map,markerViews:e.markerViews}),r.listenTo(r.view,"filter",r._handleFilterEvent),r.view.render()},_handleFilterEvent:function(e){var i=this,n=[],t=[],a={};e.clear?n=r.map(i.markerViews,function(e){return e.markerLayer}):(n=r.map(e.selected,function(e){return a[e.markerView.model.cid]=void 0,e.markerView.markerLayer}),t=r.map(r.filter(i.markerViews,function(e){return!(e.model.cid in a)}),function(e){return e.markerLayer})),i.show=n,i.hide=t,i.trigger("filter")},getFilterState:function(){return{show:this.show||[],hide:this.hide||[]}}});return l});
define("models/map/layer/timeline",["jquery","underscore","backbone","collections/timeline","models/map/layer/timeline/item","mixins/asyncInit"],function(e,t,r,n,i,a){"use strict";var o=r.Model.extend({markerViews:null,start:null,end:null,siteconfig:null,bookconfig:null,initialize:function(t){var r=this;r.markerViews=t.markerViews,r.siteconfig=t.siteconfig,r.$def=e.Deferred(),e.getJSON(r.siteconfig.book.file,function(e){r.bookconfig=e.book,r._initialize(),r.$def.resolve(r)}).fail(function(e,t,n){r.$def.reject()})},_initialize:function(){var e=this,r=new n;e.set("collection",r),t.forEach(e.markerViews,function(n){var a=n.model,o=t.findWhere(e.bookconfig.chapters,{part:a.attributes.citedRange.part,chapter:a.attributes.citedRange.chapter});if(o){var c=o.paragraphs.start+a.attributes.citedRange.paragraph,s=c+1;r.add(new i({start:c,end:s,markerView:n}))}}),e.start=t.min(e.bookconfig.chapters,function(e){return e.paragraphs.start}).paragraphs.start,e.end=t.max(e.bookconfig.chapters,function(e){return e.paragraphs.end}).paragraphs.end},getItems:function(){return this.get("collection").models},tickValues:function(){var e=t.map(this.bookconfig.chapters,function(e){return e.paragraphs.start});return e.sort(function(e,t){return e-t}),e},tickFormat:function(e){var t,r,n=this;for(t=0;t<n.bookconfig.chapters.length;++t)if(r=n.bookconfig.chapters[t],e<=r.paragraphs.end)return e=r.chapter,e===n.bookconfig.chapters.length-1?"":e;return""}});return t.extend(o.prototype,a),o});
define("views/article/gallery/lightbox",["jquery","underscore","backbone","text!partials/lightbox-title.html","lightbox"],function(e,t,i,n){"use strict";var r=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this;return e(".gallery-item").magnificPopup({type:"image",gallery:{enabled:!0},image:{titleSrc:function(i){var r=i.el.attr("id"),l=e(".popover."+r),a=t.template(n),o=a({title:l.find(".head").text(),attr:l.find(".attr").text()});return o}}}),e(".glyphicon.glyphicon-expand").on("click",function(t){e(".gallery-item").magnificPopup("open")}),i}});return r});
define("views/article/gallery/popover",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html"],function(e,t,i,r,n){"use strict";var o=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this,o=t.template(n);return e("img.slidesjs-slide").each(function(t,i){var n=i.getAttribute("id"),a=e(".popover."+n),c=a.find(".head").text();e(i).attr("alt",a.find(".desc").text());var l=o({attr:a.find(".attr").text()});e(i).popover({container:"body",html:!0,content:l,title:c,template:r,trigger:"hover",placement:"left"}),e(i).click(function(t){e(i).popover("hide")})}),i}});return o});
define("views/article/gallery/slides",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html","text!partials/lightbox-title.html","slidesjs","lightbox"],function(i,e,t,s,n,l){"use strict";var a=t.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var e=this;return i("#slides").slidesjs({navigation:{active:i("img.slidesjs-slide").length>1,effect:"fade"},pagination:{active:i("img.slidesjs-slide").length>1,effect:"fade"},effect:{fade:{speed:100,crossfade:!0}},callback:{loaded:function(e){var t=i(".slidesjs-control").children(":eq("+(e-1)+")");t.css({visibility:"hidden"}),t.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"}),t.css({left:(i(".slidesjs-container").width()-t.width())/2-parseInt(t.css("padding-left"),10),margin:0}),t.css({visibility:"visible"})},start:function(e){i(".slidesjs-control").children().css({visibility:"hidden"})},complete:function(e){var t=e-1,s=i(".slidesjs-control").children(":eq("+t+")");s.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"}),s.css({visibility:"visible"})}}}),e}});return a});
define("views/map/layer/timeline",["jquery","underscore","backbone","leaflet","text!partials/timeline.html","controls/L.Control.Timeline"],function(e,i,t,n,l){"use strict";var o=t.View.extend({id:"timeline",map:null,initialize:function(e){var i=this;i.map=e.map},_timelineCollapse:function(){var e=this;e._handleFilter({clear:!0})},_handleFilter:function(e){this.trigger("filter",e)},render:function(){var i,t,l,o,a=this;l=e("#map").height(),o=document.body.clientHeight,Math.abs(o/2-l)<2?(i="bottomright",t=e("#map").height()-100):(i="topleft",t=500),a.model.init().done(function(){a.timeline=n.control.timeline(a.map,a.model,{height:t,position:i,on:{brushend:function(e){a._handleFilter(e)}}}).addTo(a.map)})}});return o});
define("models/map/layer/timeline/item",["jquery","underscore","backbone"],function(e,n,t){"use strict";var r=t.Model.extend({markerView:null,start:null,end:null,initialize:function(e){var n=this;n.markerView=e.markerView,n.start=e.start,n.end=e.end},duration:function(){return this.end-this.start},compareTo:function(e){}});return r});
require.config({paths:{backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min",bootstrap:"//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min",d3:"//cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min",jquery:"//code.jquery.com/jquery-2.1.4.min",leaflet:"//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet",lightbox:"//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/jquery.magnific-popup.min",slidesjs:"//cdnjs.cloudflare.com/ajax/libs/slidesjs/3.0/jquery.slides.min",text:"//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.12/text.min",underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min",partials:"../partials",xsl:"../script/xsl",pages:"../pages"},shim:{bootstrap:{deps:["jquery"]},backbone:{deps:["jquery","underscore"],exports:"Backbone"},underscore:{exports:"_"},text:{deps:[]},slidesjs:{deps:["jquery"]},lightbox:{deps:["jquery"]}}}),require(["jquery","models/error/user","views/error/user","routes/router","views/app","bootstrap"],function(e,s,o,r,a){"use strict";var i=e("#main").attr("data-config");i?e.getJSON(i,function(e){try{new a,new r({routes:e.pages.routes,config:e})}catch(i){e.debug||new o({model:new s({msg:i.toString()})})}}).fail(function(e,r,a){new o({model:new s({msg:"Failed to load site config file '"+i+"' "+a})})}):new o({model:new s({msg:"No configuration filename specified in home page."})})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxlY3Rpb25zL2FydGljbGVzLmpzIiwiY29sbGVjdGlvbnMvdGltZWxpbmUuanMiLCJjb250cm9sbGVycy9pc3N1ZS5qcyIsImNvbnRyb2xsZXJzL21hcC5qcyIsImNvbnRyb2xsZXJzL3Byb3RvdHlwZS5qcyIsImNvbnRyb2xzL0wuQ29udHJvbC5UaW1lbGluZS5qcyIsIm1peGlucy9hc3luY0luaXQuanMiLCJtaXhpbnMvZG9td2F0Y2hlci5qcyIsIm1peGlucy9mZXRjaHhtbC5qcyIsIm1peGlucy94bWwyaHRtbC5qcyIsIm1vZGVscy9hcnRpY2xlLmpzIiwibW9kZWxzL2lzc3VlLmpzIiwibW9kZWxzL21hcC5qcyIsInJvdXRlcy9yb3V0ZXIuanMiLCJ2aWV3cy9hcHAuanMiLCJ2aWV3cy9hcnRpY2xlLmpzIiwidmlld3MvY2xlYXIuanMiLCJ2aWV3cy9pc3N1ZS5qcyIsInZpZXdzL21hcC5qcyIsInZpZXdzL21hcmtlci5qcyIsInZpZXdzL21lbnUuanMiLCJ2aWV3cy9wYWdlLmpzIiwidmlld3MvcGFydGlhbC5qcyIsImNvbnRyb2xsZXJzL21hcC9sYXllci5qcyIsImNvbnRyb2xsZXJzL21hcC9wYW4uanMiLCJtb2RlbHMvZXJyb3IvdXNlci5qcyIsInZpZXdzL2FydGljbGUvZ2FsbGVyeS5qcyIsInZpZXdzL2FydGljbGUvbWVudS5qcyIsInZpZXdzL2Vycm9yL3VzZXIuanMiLCJjb250cm9sbGVycy9tYXAvbGF5ZXIvcGxhY2V0eXBlLmpzIiwiY29udHJvbGxlcnMvbWFwL2xheWVyL3RpbWVsaW5lLmpzIiwibW9kZWxzL21hcC9sYXllci90aW1lbGluZS5qcyIsInZpZXdzL2FydGljbGUvZ2FsbGVyeS9saWdodGJveC5qcyIsInZpZXdzL2FydGljbGUvZ2FsbGVyeS9wb3BvdmVyLmpzIiwidmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3NsaWRlcy5qcyIsInZpZXdzL21hcC9sYXllci90aW1lbGluZS5qcyIsIm1vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUvaXRlbS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiZGVmaW5lIiwiJCIsIl8iLCJCYWNrYm9uZSIsIkFydGljbGVNb2RlbCIsIkFydGljbGVzQ29sbGVjdGlvbiIsIkNvbGxlY3Rpb24iLCJleHRlbmQiLCJtb2RlbCIsIlRpbWVsaW5lSXRlbU1vZGVsIiwiVGltZWxpbmVDb2xsZWN0aW9uIiwiQ29udHJvbGxlciIsIkFzeW5jSW5pdCIsIklzc3VlVmlldyIsIklzc3VlTW9kZWwiLCJJc3N1ZUNvbnRyb2xsZXIiLCJ2aWV3Iiwicm91dGVyIiwiaW5pdGlhbGl6ZSIsImFyZ3MiLCJ0aGF0IiwidGhpcyIsIiRkZWYiLCJEZWZlcnJlZCIsImNvbmZpZyIsInJlbmRlciIsImluaXQiLCJkb25lIiwiZm9yRWFjaCIsImdldCIsIm1vZGVscyIsImFydGljbGUiLCJsaXN0ZW5UbyIsInVybCIsIm5hdmlnYXRlIiwidHJpZ2dlciIsInJlbmRlckFydGljbGUiLCJyZXNvbHZlIiwiYWx3YXlzIiwicmVqZWN0IiwicHJvdG90eXBlIiwiTWFwTW9kZWwiLCJNYXBWaWV3IiwiTWFwUGFuQ29udHJvbGxlciIsIk1hcExheWVyQ29udHJvbGxlciIsIk1hcFRpbWVsaW5lQ29udHJvbGxlciIsIk1hcENvbnRyb2xsZXIiLCJpc3N1ZSIsIm1hcFBhbkNvbnRyb2xsZXIiLCJtYXBUaW1lbGluZUNvbnRyb2xsZXIiLCJtYXAiLCJtYXBMYXllckNvbnRyb2xsZXIiLCJtYXBjb25maWciLCJhdHRyaWJ1dGVzIiwiY29udHJvbHNjb25maWciLCJjb250cm9scyIsIm1hcmtlclZpZXdzIiwiX3JlZ2lzdGVyTWFya2VycyIsImZpdE1hcmtlckJvdW5kcyIsIndoZW4iLCJhcHBseSIsIm1hcmtlclZpZXciLCJtYXBQb3B1cE9wZW4iLCJtYXJrZXJMYXllciIsIm1hcmtlciIsIl9nZXRNYXJrZXJMYXllciIsImhhbmRsZVBvcHVwUG9zaXRpb24iLCJnZXRQb3B1cCIsIm1hcFBvcHVwVG9nZ2xlIiwiZXZ0IiwiaG92ZXJQb3B1cCIsIm9wZW5wb3B1cCIsInBvcHVwaWQiLCJtYXBNYXJrZXIiLCJnZXRMYXRMbmciLCJvcGVuUG9wdXAiLCJvYmoiLCJtZXRob2QiLCJtYXBNYXJrZXJMYXllciIsImxheWVycyIsIkwiLCJMYXllckdyb3VwIiwiZ2V0TGF5ZXJzIiwicG9wIiwiaGFzIiwidGFyZ2V0IiwidG9nZ2xlUG9wdXAiLCJtYXBQb3B1cENsb3NlIiwiY2xvc2VQb3B1cCIsImNpZCIsInVuaXF1ZUlkIiwiYXJndW1lbnRzIiwiUm91dGVyIiwiRXZlbnRzIiwiRXJyb3IiLCJkMyIsIkNvbnRyb2wiLCJUaW1lbGluZSIsIm9wdGlvbnMiLCJvcmllbnRhdGlvbiIsImhlaWdodCIsIndpZHRoIiwibWFyZ2luIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiY29sbGFwc2VkIiwiaXRlbSIsIm1pbkhlaWdodCIsIm9uIiwidGl0bGUiLCJwb3NpdGlvbiIsInNvdXJjZSIsIlV0aWwiLCJzZXRPcHRpb25zIiwiX21hcCIsIl9zb3VyY2UiLCJjb250YWluZXIiLCJfY29udGFpbmVyIiwiRG9tVXRpbCIsImNyZWF0ZSIsImFkZENsYXNzIiwidG9nZ2xlIiwiX3RvZ2dsZSIsImxpbmsiLCJleHBhbmQiLCJfZXhwYW5kIiwiQnJvd3NlciIsInRvdWNoIiwiRG9tRXZlbnQiLCJzdG9wIiwic3RvcFByb3BhZ2F0aW9uIiwiZGlzYWJsZUNsaWNrUHJvcGFnYXRpb24iLCJvblJlbW92ZSIsIm9uQWRkIiwiX2V4cGFuZGVkIiwiX2NvbGxhcHNlIiwicmVtb3ZlQ2xhc3MiLCJfdGltZWxpbmUiLCJpbm5lckhlaWdodCIsImlubmVyV2lkdGgiLCJ5U2NhbGUiLCJfeFNjYWxlIiwic2NhbGUiLCJsaW5lYXIiLCJyYW5nZSIsIl95U2NhbGUiLCJkb21haW4iLCJzdGFydCIsImVuZCIsInRpbWVsaW5lIiwic2VsZWN0IiwiYXBwZW5kIiwiYXR0ciIsImJhbmQiLCJicnVzaCIsInNlbGVjdEFsbCIsImRhdGEiLCJnZXRJdGVtcyIsImVudGVyIiwiZCIsIm1heCIsImR1cmF0aW9uIiwiX2JydXNoIiwic3ZnIiwieSIsImV4dFN0YXJ0IiwiZXh0ZW50IiwiZXh0RW5kIiwicmVzdWx0cyIsImNsZWFyIiwic2VsZWN0ZWQiLCJlYWNoIiwiaSIsInB1c2giLCJicnVzaGVuZCIsInlCcnVzaCIsImNhbGwiLCJ5QXhpcyIsImF4aXMiLCJvcmllbnQiLCJ0aWNrU2l6ZSIsInRpY2tWYWx1ZXMiLCJ0aWNrRm9ybWF0IiwiY29sbGFwc2UiLCJvZmYiLCJjb250cm9sIiwicHJvbWlzZSIsIkRPTVdhdGNoZXIiLCJ3YXRjaERPTSIsIm1zIiwic2VsIiwibGVuZ3RoIiwiZiIsImRvY3VtZW50IiwiYm9keSIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJGZXRjaFhNTCIsImZldGNoWE1MIiwiJGdldCIsImFqYXgiLCJ0eXBlIiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwiZXJyb3IiLCJqcVhIUiIsInRleHRTdGF0dXMiLCJlcnJvclRocm93biIsIlhNTDJIVE1MIiwiX2RvYyIsInhtbCIsInhtbERvYyIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsIkRvY3VtZW50IiwiaGFzT3duUHJvcGVydHkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInhtbDJodG1sIiwieHNsIiwicGFyYW1zIiwibW9kZSIsInhzbERvYyIsInhzbHRQcm9jZXNzb3IiLCJYU0xUUHJvY2Vzc29yIiwiaW1wb3J0U3R5bGVzaGVldCIsImtleXMiLCJrZXkiLCJzZXRQYXJhbWV0ZXIiLCJyZXN1bHQiLCJkb2MiLCJ0cmFuc2Zvcm1Ub0RvY3VtZW50IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5kZXhPZiIsImRvY3VtZW50RWxlbWVudCIsInRleHRDb250ZW50IiwiaW5uZXJIVE1MIiwiZSIsInRvU3RyaW5nIiwiZ2VvSnNvblhzbCIsImNpdGVkUmFuZ2VYc2wiLCJNb2RlbCIsInNldCIsIl9ta0dlb2pzb24iLCJfbWtDaXRlZFJhbmdlIiwiZ2VvanNvbiIsInByb3BlcnRpZXMiLCJsYXllciIsImZhaWwiLCJkZWZhdWx0cyIsInBsYWNlVHlwZSIsImljb25VcmwiLCJjaXRlZFJhbmdlIiwiZ2V0R2VvanNvbiIsImpzb25TdHJpbmciLCJKU09OIiwicGFyc2UiLCJBcnRpY2xlQ29sbGVjdGlvbiIsImFydGRpciIsImFydGljbGVzIiwicGF0aEJhc2UiLCJtYXRjaCIsImZpbGVzIiwiY29sIiwidW5kZWZpbmVkIiwiZmlsZSIsImFydGljbGVpZCIsImFydGljbGVkaXIiLCJwYXRoIiwiaW5pdHMiLCJhZGQiLCJzZXRJY29ucyIsIiRwcm9taXNlIiwic3RhdGUiLCJpY2NvbmZpZyIsIm1hcmtlcnMiLCJpY29ucyIsImljb25GaWxlcyIsInNodWZmbGUiLCJmbGF0dGVuIiwiZW50cnkiLCJkaXIiLCJjb25jYXQiLCJkZWZhdWx0SWNvbkZpbGUiLCJnZXRBcnRpY2xlIiwiYXJ0IiwiYXQiLCJnZXRKU09OIiwianF4aHIiLCJjb25zb2xlIiwibG9nIiwiVXNlckVycm9yTW9kZWwiLCJVc2VyRXJyb3JWaWV3IiwiQ2xlYXJWaWV3IiwiTWVudVZpZXciLCJwYWdlcyIsImlzc3VlQ29udHJvbGxlciIsIm1hcENvbnRyb2xsZXIiLCJvcHRzIiwiaGlzdG9yeSIsImZyYWdtZW50IiwicGFnZSIsInBhZ2VDb25maWciLCJtYXBQYWdlIiwiaG9tZSIsInBjIiwidmlld05hbWUiLCJzdHJpbmdpZnkiLCJjb25mZyIsImxvY2F0aW9uIiwiaHJlZiIsImZ1bGwiLCJwYXJ0aWFsIiwicmVxdWlyZSIsIlZpZXciLCJ2IiwiaWQiLCJyZW1vdmUiLCJjaGlsZHJlbiIsIkFwcFZpZXciLCJlbCIsInJlc2l6ZSIsInJlbG9hZCIsIkdhbGxlcnlWaWV3IiwiQXJ0aWNsZVZpZXciLCIkZWwiLCJmaW5kIiwiaHRtbCIsImFydGljbGUtZGlyIiwiY2xpY2siLCJlbHQiLCJ0bXBsIiwiZW1wdHkiLCJ0ZW1wbGF0ZSIsIm1hcFBhcnRpYWwiLCJNYXJrZXJWaWV3IiwidGFnTmFtZSIsIl9pbml0TWFwIiwiTWFwIiwiVGlsZUxheWVyIiwidGlsZUxheWVyIiwiYWRkVG8iLCJyZW5ld1ZpZXdzIiwibXYiLCJsZWdlbmRQYXJ0aWFsIiwiaW5pdE1hcmtlckxheWVyIiwiaWNvbkNvbmZpZyIsImZlYXR1cmVzIiwiaWNvbiIsImdlb0pzb24iLCJvbkVhY2hGZWF0dXJlIiwiZmVhdHVyZSIsInBvcHVwIiwic2V0Q29udGVudCIsImJpbmRQb3B1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwb2ludFRvTGF5ZXIiLCJsYXRsbmciLCJjbGlja2FibGUiLCJ0ZXh0IiwibWFya2VybmFtZSIsIm9wYWNpdHkiLCJyaXNlT25Ib3ZlciIsIm1lbnVUbXBsIiwiQXJ0aWNsZU1lbnVWaWV3IiwiaXRlbXMiLCJtZW51IiwicHJvbWlzZXMiLCJ0ZW1wbGF0ZXMiLCJjb2xsZWN0aW9ucyIsImNvbGxlY3Rpb24iLCJ0ZW1wbCIsImNvbnRlbnQiLCJzb3J0ZXIiLCJzdWJDb250ZW50Iiwic29ydEtleXMiLCJqIiwiJGxpIiwicmVwbGFjZSIsImFtdiIsIkVsZW1lbnQiLCJub2RlTmFtZSIsIm91dGVySFRNTCIsImNsb25lIiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsImxhYmVsIiwidGhlbiIsIiRmYWlsRGVmIiwiUGFnZVZpZXciLCJQYXJ0aWFsVmlldyIsIiR3YXRjaERlZiIsIlBsYWNlVHlwZUNvbnRyb2xsZXIiLCJUaW1lbGluZUNvbnRyb2xsZXIiLCJzdWJDb250cm9sbGVycyIsInBsYWNldHlwZSIsImVuYWJsZSIsInZpZXdzIiwic2l0ZWNvbmZpZyIsInN1YkNvbnRyb2xsZXIiLCJfdXBkYXRlTWFya2VycyIsInNob3ciLCJoaWRlIiwicmVzIiwiZ2V0RmlsdGVyU3RhdGUiLCJmb3VuZCIsImhpZGRlbkxheWVyIiwiYWRkTGF5ZXIiLCJyZW1vdmVMYXllciIsIl9maXRNYXJrZXJCb3VuZHMiLCJnZXRFbGVtZW50QnlJZCIsImVkZ2VQdFgiLCJnZXRWaWV3cG9ydE9mZnNldCIsIngiLCJib3VuZHMiLCJsYXRMbmdCb3VuZHMiLCJsbmdMYXQiLCJnZW9tZXRyeSIsImNvb3JkaW5hdGVzIiwic2xpY2UiLCJsYXRMbmciLCJyZXZlcnNlIiwiZml0Qm91bmRzIiwiZ2V0U2l6ZSIsInBhZGRpbmdCb3R0b21SaWdodCIsImNsaWVudFdpZHRoIiwiaW52YWxpZGF0ZVNpemUiLCIkcG9wdXBXcmFwIiwicG9wdXBMYXRMbmciLCJwb3B1cFJpZ2h0WCIsInBhZCIsImdldENvbnRlbnQiLCJjbG9zZXN0IiwiZmlyc3QiLCJwb2ludCIsImF1dG9QYW5QYWRkaW5nQm90dG9tUmlnaHQiLCJhdXRvUGFuUGFkZGluZyIsIm9mZnNldCIsInBhbkJ5IiwiZ2V0Qm91bmRzIiwiY29udGFpbnMiLCJtc2ciLCJtZXNzYWdlIiwiQXJ0aWNsZUdhbGxlcnlQb3BvdmVyVmlldyIsIkFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3IiwiQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3IiwiQXJ0aWNsZUdhbGxlcnlWaWV3Iiwib3V0ZXJIZWlnaHQiLCJjc3MiLCJkZWZzIiwiaW1nIiwibG9hZCIsImFtWHNsIiwibWVudWl0ZW0iLCJtb2RhbCIsImtleWJvYXJkIiwiUGxhY2V0eXBlQ29udHJvbGxlciIsImxlZ2VuZFRlbXBsIiwibGF5ZXJNYXJrZXJzIiwiZ3JvdXBCeSIsImdldENvbnRhaW5lciIsIk9iamVjdCIsImxheWVyTmFtZSIsImtsYXNzIiwibGF5ZXJMZWdlbmQiLCJtYXJrZXJMYXllcnMiLCJsYXllckdyb3VwIiwiYWRkT3ZlcmxheSIsIl9vbklucHV0Q2xpY2siLCJpbnB1dCIsImlucHV0cyIsIl9mb3JtIiwiaW5wdXRzTGVuIiwiX2hhbmRsaW5nQ2xpY2siLCJfbGF5ZXJzIiwibGF5ZXJJZCIsImNoZWNrZWQiLCJfcmVmb2N1c09uTWFwIiwiVGltZWxpbmVWaWV3IiwiVGltZWxpbmVNb2RlbCIsIl9oYW5kbGVGaWx0ZXJFdmVudCIsInNob3dMYXllcnMiLCJoaWRlTGF5ZXJzIiwic2hvd0lkcyIsImZpbHRlciIsIlRpbWVsaW5lSXRlbSIsImJvb2tjb25maWciLCJib29rIiwiX2luaXRpYWxpemUiLCJib29rQ2hhcHRlciIsImZpbmRXaGVyZSIsImNoYXB0ZXJzIiwicGFydCIsImNoYXB0ZXIiLCJwYXJhZ3JhcGhzIiwicGFyYWdyYXBoIiwibWluIiwidmFsdWVzIiwicCIsImxpZ2h0Ym94VGl0bGVUZW1wbCIsIm1hZ25pZmljUG9wdXAiLCJnYWxsZXJ5IiwiZW5hYmxlZCIsImltYWdlIiwidGl0bGVTcmMiLCIkaXRlbSIsIiRwbyIsInBjdCIsInBvcG92ZXJUZW1wbCIsInBvcG92ZXJDb250ZW50VGVtcGwiLCJnZXRBdHRyaWJ1dGUiLCJwb3BvdmVyIiwicGxhY2VtZW50Iiwic2xpZGVzanMiLCJuYXZpZ2F0aW9uIiwiYWN0aXZlIiwiZWZmZWN0IiwicGFnaW5hdGlvbiIsImZhZGUiLCJzcGVlZCIsImNyb3NzZmFkZSIsImNhbGxiYWNrIiwibG9hZGVkIiwibnVtYmVyIiwiJGltZyIsInZpc2liaWxpdHkiLCJtYXhIZWlnaHQiLCJtYXhXaWR0aCIsInBhcnNlSW50IiwiY29tcGxldGUiLCJuZXdJbWciLCJ0aW1lbGluZUNvbnRyb2xQYXJ0aWFsIiwiX3RpbWVsaW5lQ29sbGFwc2UiLCJfaGFuZGxlRmlsdGVyIiwiY29udHJvbGhlaWdodCIsIm1hcGhlaWdodCIsImRvY3VtZW50aGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiTWF0aCIsImFicyIsImNvbXBhcmVUbyIsInBhdGhzIiwiYmFja2JvbmUiLCJib290c3RyYXAiLCJqcXVlcnkiLCJsZWFmbGV0IiwibGlnaHRib3giLCJ1bmRlcnNjb3JlIiwicGFydGlhbHMiLCJzaGltIiwiZGVwcyIsImV4cG9ydHMiLCJjb25maWdmaWxlIiwicm91dGVzIiwiZGVidWciXSwibWFwcGluZ3MiOiJBQUNBQSxPQUFPLHdCQUNILFNBQ0EsYUFDQSxXQUNBLGtCQUNELFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNDLEdBQ3JCLFlBQ0EsSUFBSUMsR0FBcUJGLEVBQVNHLFdBQVdDLFFBQ3pDQyxNQUFPSixHQUVYLE9BQU9DO0FD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aW5lKCdjb2xsZWN0aW9ucy9hcnRpY2xlcycsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ3VuZGVyc2NvcmUnLCBcbiAgICAnYmFja2JvbmUnLFxuICAgICdtb2RlbHMvYXJ0aWNsZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBcnRpY2xlTW9kZWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVzQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcbiAgICAgICAgbW9kZWw6IEFydGljbGVNb2RlbFxuICAgIH0pOyAgICBcbiAgICByZXR1cm4gQXJ0aWNsZXNDb2xsZWN0aW9uO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnY29sbGVjdGlvbnMvdGltZWxpbmUnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJywgXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbW9kZWxzL21hcC9sYXllci90aW1lbGluZS9pdGVtJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLFRpbWVsaW5lSXRlbU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBUaW1lbGluZUNvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG4gICAgICAgIG1vZGVsOiBUaW1lbGluZUl0ZW1Nb2RlbFxuICAgIH0pOyAgICBcbiAgICByZXR1cm4gVGltZWxpbmVDb2xsZWN0aW9uO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9pc3N1ZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbiAgICAsICd2aWV3cy9pc3N1ZSdcbiAgICAsICdtb2RlbHMvaXNzdWUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixBc3luY0luaXQsSXNzdWVWaWV3LElzc3VlTW9kZWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIElzc3VlQ29udHJvbGxlciA9IENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICAgICAgICBtb2RlbDogbnVsbFxuICAgICAgICAsIHZpZXcgOiBudWxsXG4gICAgICAgICwgcm91dGVyOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhhdC5yb3V0ZXIgPSBhcmdzLnJvdXRlcjtcbiAgICAgICAgICAgIHRoYXQubW9kZWwgPSBuZXcgSXNzdWVNb2RlbCh7IGNvbmZpZzogYXJncy5jb25maWcgfSk7XG4gICAgICAgICAgICB0aGF0LnZpZXcgPSBuZXcgSXNzdWVWaWV3KHtcbiAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGF0Lm1vZGVsXG4gICAgICAgICAgICAgICAgLCBjb25maWc6IGFyZ3MuY29uZmlnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoYXQudmlldy5yZW5kZXIoKTtcbiAgICAgICAgICAgIHRoYXQubW9kZWwuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQubW9kZWwuZ2V0KCdjb2xsZWN0aW9uJykubW9kZWxzLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8oYXJ0aWNsZSwgJ2FjdGl2ZScsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSAnYXJ0aWNsZS8nICsgYXJ0aWNsZS5nZXQoJ2FydGljbGVpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5yb3V0ZXIubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjogdHJ1ZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC52aWV3LnJlbmRlckFydGljbGUoYXJ0aWNsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSkuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoSXNzdWVDb250cm9sbGVyLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBJc3N1ZUNvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL21hcCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAnbW9kZWxzL21hcCdcbiAgICAsICd2aWV3cy9tYXAnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbiAgICAsICdjb250cm9sbGVycy9tYXAvcGFuJ1xuICAgICwgJ2NvbnRyb2xsZXJzL21hcC9sYXllcidcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxDb250cm9sbGVyLE1hcE1vZGVsLE1hcFZpZXcsQXN5bmNJbml0LE1hcFBhbkNvbnRyb2xsZXIsTWFwTGF5ZXJDb250cm9sbGVyLE1hcFRpbWVsaW5lQ29udHJvbGxlcikge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwQ29udHJvbGxlciA9IENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICAgICAgICBtb2RlbDogbnVsbFxuICAgICAgICAsIHZpZXc6ICBudWxsXG4gICAgICAgICwgaXNzdWU6IG51bGxcbiAgICAgICAgLCBjb25maWc6IG51bGxcbiAgICAgICAgLCBtYXBQYW5Db250cm9sbGVyIDogbnVsbFxuICAgICAgICAsIE1hcExheWVyQ29udHJvbGxlciA6IG51bGxcbiAgICAgICAgLCBtYXBUaW1lbGluZUNvbnRyb2xsZXIgOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgICAgIHRoYXQucm91dGVyID0gYXJncy5yb3V0ZXI7XG4gICAgICAgICAgICB0aGF0Lmlzc3VlID0gYXJncy5pc3N1ZTtcbiAgICAgICAgICAgIHRoYXQubW9kZWwgPSBuZXcgTWFwTW9kZWwoYXJncyk7XG4gICAgICAgICAgICB0aGF0LnZpZXcgPSBuZXcgTWFwVmlldyh7XG4gICAgICAgICAgICAgICAgICBtb2RlbDogIHRoYXQubW9kZWxcbiAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhhdC5yb3V0ZXJcbiAgICAgICAgICAgICAgICAsIGlzc3VlOiB0aGF0Lmlzc3VlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoYXQudmlldy5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcFBhbkNvbnRyb2xsZXIgPSBuZXcgTWFwUGFuQ29udHJvbGxlcih7XG4gICAgICAgICAgICAgICAgICAgIG1hcDogdGhhdC52aWV3Lm1hcFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubWFwTGF5ZXJDb250cm9sbGVyID0gbmV3IE1hcExheWVyQ29udHJvbGxlcih7XG4gICAgICAgICAgICAgICAgICAgICAgdmlldyAgOiB0aGF0LnZpZXdcbiAgICAgICAgICAgICAgICAgICAgLCBtYXAgICA6IHRoYXQudmlldy5tYXBcbiAgICAgICAgICAgICAgICAgICAgLCBtb2RlbCA6IHRoYXQubW9kZWxcbiAgICAgICAgICAgICAgICAgICAgLCBtYXBjb25maWc6IHRoYXQubW9kZWwuYXR0cmlidXRlcy5tYXBjb25maWdcbiAgICAgICAgICAgICAgICAgICAgLCBjb250cm9sc2NvbmZpZzogdGhhdC5jb25maWcuY29udHJvbHNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKHRoYXQudmlldywgJ21hcmtlcnMnLCBmdW5jdGlvbihtYXJrZXJWaWV3cyl7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX3JlZ2lzdGVyTWFya2VycyhtYXJrZXJWaWV3cyk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUGFuQ29udHJvbGxlci5maXRNYXJrZXJCb3VuZHModGhhdC52aWV3Lm1hcmtlclZpZXdzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0LnZpZXcucmVuZGVyKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseShudWxsLFt0aGF0Lm1vZGVsLmluaXQoKSwgdGhhdC52aWV3LmluaXQoKV0pLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9yZWdpc3Rlck1hcmtlcnMgOiBmdW5jdGlvbihtYXJrZXJWaWV3cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgXy5mb3JFYWNoKG1hcmtlclZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5UbyhtYXJrZXJWaWV3Lm1vZGVsLCAnYWN0aXZlJywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcFBvcHVwT3BlbihtYXJrZXJWaWV3Lm1hcmtlckxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IHRoYXQuX2dldE1hcmtlckxheWVyKG1hcmtlclZpZXcubWFya2VyTGF5ZXIsICdnZXRQb3B1cCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFya2VyICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQYW5Db250cm9sbGVyLmhhbmRsZVBvcHVwUG9zaXRpb24obWFya2VyLmdldFBvcHVwKCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8obWFya2VyVmlldy5tb2RlbCwgJ3RvZ2dsZScsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQb3B1cFRvZ2dsZShtYXJrZXJWaWV3Lm1hcmtlckxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IHRoYXQuX2dldE1hcmtlckxheWVyKG1hcmtlclZpZXcubWFya2VyTGF5ZXIsICdnZXRQb3B1cCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFya2VyICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQYW5Db250cm9sbGVyLmhhbmRsZVBvcHVwUG9zaXRpb24obWFya2VyLmdldFBvcHVwKCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8obWFya2VyVmlldywgJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUG9wdXBPcGVuKGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlclZpZXcubW9kZWwudHJpZ2dlcignYWN0aXZlJywgbWFya2VyVmlldy5tb2RlbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5UbyhtYXJrZXJWaWV3LCdtb3VzZW92ZXInLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGF0LnZpZXcubWFwLmhvdmVyUG9wdXApIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5wb3B1cFtwb3B1cGlkKG1hcE1hcmtlci5nZXRMYXRMbmcoKSldKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5vcGVuUG9wdXAoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgX2dldE1hcmtlckxheWVyIDogZnVuY3Rpb24ob2JqLG1ldGhvZCkge1xuICAgICAgICAgICAgdmFyIG1hcE1hcmtlckxheWVyLCBsYXllcnM7XG4gICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgTC5MYXllckdyb3VwKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyTGF5ZXIgPSBvYmo7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJzID0gb2JqLmdldExheWVycygpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAob2JqID0gbGF5ZXJzLnBvcCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kIGluIG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlckxheWVyID0gb2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChfLmhhcyhvYmosICdvcmlnaW5hbEV2ZW50JykpIHtcbiAgICAgICAgICAgICAgICBtYXBNYXJrZXJMYXllciA9IG9iai50YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWFwTWFya2VyTGF5ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLCBtYXBQb3B1cE9wZW46IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIG1hcE1hcmtlckxheWVyID0gdGhpcy5fZ2V0TWFya2VyTGF5ZXIob2JqLCAnb3BlblBvcHVwJyk7XG4gICAgICAgICAgICBpZiAoIW1hcE1hcmtlckxheWVyKSByZXR1cm47XG4gICAgICAgICAgICBtYXBNYXJrZXJMYXllci5vcGVuUG9wdXAoKTtcbiAgICAgICAgfVxuICAgICAgICAsIG1hcFBvcHVwVG9nZ2xlOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBtYXBNYXJrZXJMYXllciA9IHRoaXMuX2dldE1hcmtlckxheWVyKG9iaiwgJ3RvZ2dsZVBvcHVwJyk7XG4gICAgICAgICAgICBpZiAoIW1hcE1hcmtlckxheWVyKSByZXR1cm47XG4gICAgICAgICAgICBtYXBNYXJrZXJMYXllci50b2dnbGVQb3B1cCgpO1xuICAgICAgICB9XG4gICAgICAgICwgbWFwUG9wdXBDbG9zZTogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgbWFwTWFya2VyTGF5ZXIgPSB0aGlzLl9nZXRNYXJrZXJMYXllcihvYmosICdjbG9zZVBvcHVwJyk7XG4gICAgICAgICAgICBpZiAoIW1hcE1hcmtlckxheWVyKSByZXR1cm47XG4gICAgICAgICAgICBtYXBNYXJrZXJMYXllci5jbG9zZVBvcHVwKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChNYXBDb250cm9sbGVyLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBNYXBDb250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9wcm90b3R5cGUnLCBbXG4gICAgICAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKF8sQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIENvbnRyb2xsZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5jaWQgPSBfLnVuaXF1ZUlkKCdjb250cm9sbGVyJyk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgQ29udHJvbGxlci5leHRlbmQgPSBCYWNrYm9uZS5Sb3V0ZXIuZXh0ZW5kO1xuICAgIF8uZXh0ZW5kKENvbnRyb2xsZXIucHJvdG90eXBlLCBCYWNrYm9uZS5FdmVudHMpO1xuICAgIF8uZXh0ZW5kKENvbnRyb2xsZXIucHJvdG90eXBlLCB7IFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5pbXBsZW1lbnRlZCBpbml0aWFsaXplKCknKTtcbiAgICAgICAgfSBcbiAgICB9KTtcbiAgICByZXR1cm4gQ29udHJvbGxlcjtcbn0pOyIsImRlZmluZSgnY29udHJvbHMvTC5Db250cm9sLlRpbWVsaW5lJywgW1xuICAgICAgJ2xlYWZsZXQnXG4gICAgLCAnZDMnXG5dLCBmdW5jdGlvbiAoTCxkMykge1xuICAgIGlmIChMLkNvbnRyb2wuVGltZWxpbmUpIHJldHVybiBMO1xuICAgIEwuQ29udHJvbC5UaW1lbGluZSA9IEwuQ29udHJvbC5leHRlbmQoe1xuICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbiA6ICdsZWZ0J1xuICAgICAgICAgICAgICAsIGhlaWdodCAgICAgIDogNTAwXG4gICAgICAgICAgICAgICwgd2lkdGggICAgICAgOiAxMDBcbiAgICAgICAgICAgICAgLCBtYXJnaW4gICAgICA6IHsgbGVmdDogMywgcmlnaHQ6IDMsIHRvcDogMTAsIGJvdHRvbTogNSB9XG4gICAgICAgICAgICAgICwgY29sbGFwc2VkICAgOiB0cnVlXG4gICAgICAgICAgICAgICwgaXRlbSAgICAgICAgOiB7bWluSGVpZ2h0OjF9XG4gICAgICAgICAgICAgICwgb24gICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgICwgdGl0bGUgICAgICAgOiAnVGltZWxpbmUnXG4gICAgICAgICAgICAgICwgcG9zaXRpb24gICAgOiAndG9wbGVmdCdcbiAgICAgICAgfVxuICAgICAgICAsIGluaXRpYWxpemUgOiBmdW5jdGlvbihtYXAsIHNvdXJjZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgTC5VdGlsLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLl9tYXAgPSBtYXA7XG4gICAgICAgICAgICB0aGlzLl9zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5fY29udGFpbmVyID0gTC5Eb21VdGlsLmNyZWF0ZSgnZGl2JywnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lIGxlYWZsZXQtY29udHJvbCcpO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb2xsYXBzZWQpIHtcbiAgICAgICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3MoY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWNvbGxhcHNlZCcpO1xuICAgICAgICAgICAgICAgIHZhciB0b2dnbGUgPSB0aGlzLl90b2dnbGUgPSBMLkRvbVV0aWwuY3JlYXRlKCdhJywgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS10b2dnbGUnLCBjb250YWluZXIpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZS50aXRsZSA9IHRoaXMub3B0aW9ucy50aXRsZTtcbiAgICAgICAgICAgICAgICB0b2dnbGUubGluayA9ICcjJztcbiAgICAgICAgICAgICAgICB2YXIgZXhwYW5kID0gZnVuY3Rpb24oKSB7IHRoYXQuX2V4cGFuZCgpOyB9O1xuICAgICAgICAgICAgICAgIGlmIChMLkJyb3dzZXIudG91Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgTC5Eb21FdmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKHRvZ2dsZSwgJ2NsaWNrJywgTC5Eb21FdmVudC5zdG9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKHRvZ2dsZSwgJ2NsaWNrJywgZXhwYW5kLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBMLkRvbUV2ZW50Lm9uKHRvZ2dsZSwgJ2NsaWNrJywgZXhwYW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEwuRG9tVXRpbC5hZGRDbGFzcyhjb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtZXhwYW5kZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghTC5Ccm93c2VyLnRvdWNoKSB7XG4gICAgICAgICAgICAgICAgTC5Eb21FdmVudC5kaXNhYmxlQ2xpY2tQcm9wYWdhdGlvbih0aGlzLl9jb250YWluZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBMLkRvbUV2ZW50Lm9uKHRoaXMuX2NvbnRhaW5lciwgJ2NsaWNrJywgTC5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICAsIG9uUmVtb3ZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIGRvIGFueSBjbGVhbnVwIGhlcmVcbiAgICAgICAgfVxuICAgICAgICAsIG9uQWRkOiBmdW5jdGlvbihtYXApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb250YWluZXI7XG4gICAgICAgIH1cbiAgICAgICAgLCBfZXhwYW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGF0Ll9leHBhbmRlZCkgcmV0dXJuO1xuICAgICAgICAgICAgdGhhdC5fZXhwYW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fbWFwLm9uKCdjbGljaycsIHRoaXMuX2NvbGxhcHNlLCB0aGlzKTtcblxuICAgICAgICAgICAgTC5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX2NvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgIEwuRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl9jb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtZXhwYW5kZWQnKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3RpbWVsaW5lKSByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciBpbm5lckhlaWdodCA9IHRoaXMub3B0aW9ucy5oZWlnaHQgLSB0aGlzLm9wdGlvbnMubWFyZ2luLnRvcCAgIC0gdGhpcy5vcHRpb25zLm1hcmdpbi5ib3R0b207XG4gICAgICAgICAgICB2YXIgaW5uZXJXaWR0aCAgPSB0aGlzLm9wdGlvbnMud2lkdGggIC0gdGhpcy5vcHRpb25zLm1hcmdpbi5yaWdodCAtIHRoaXMub3B0aW9ucy5tYXJnaW4ubGVmdDtcblxuICAgICAgICAgICAgdmFyIHhTY2FsZSA9IHRoaXMuX3hTY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpXG4gICAgICAgICAgICAgICAgLnJhbmdlKFswLGlubmVyV2lkdGhdKTtcblxuICAgICAgICAgICAgdmFyIHlTY2FsZSA9IHRoaXMuX3lTY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpXG4gICAgICAgICAgICAgICAgLmRvbWFpbihbdGhpcy5fc291cmNlLnN0YXJ0LHRoaXMuX3NvdXJjZS5lbmRdKVxuICAgICAgICAgICAgICAgIC5yYW5nZShbMCxpbm5lckhlaWdodF0pO1xuXG4gICAgICAgICAgICB2YXIgdGltZWxpbmUgPSB0aGlzLl90aW1lbGluZSA9IGQzLnNlbGVjdCgnLmxlYWZsZXQtY29udHJvbC10aW1lbGluZScpXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgnc3ZnJylcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCAndGltZWxpbmUnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCB0aGlzLm9wdGlvbnMuaGVpZ2h0KVxuICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHRoaXMub3B0aW9ucy53aWR0aCk7XG5cbiAgICAgICAgICAgIHZhciBiYW5kID0gdGltZWxpbmUuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCdiYW5kJylcbiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCAoaW5uZXJXaWR0aC8yIC0gdGhpcy5vcHRpb25zLm1hcmdpbi5yaWdodCkpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGlubmVySGVpZ2h0KVxuICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLFxuICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2xhdGUoJyArIC4yNSppbm5lcldpZHRoICsgJywnICsgdGhpcy5vcHRpb25zLm1hcmdpbi50b3AgKyAgJyknXG4gICAgICAgICAgICAgICAgICAgICsgJyBzY2FsZSguNzUgMS4wKSdcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBiYW5kLnNlbGVjdEFsbCgnZycpXG4gICAgICAgICAgICAgICAgLmRhdGEodGhpcy5fc291cmNlLmdldEl0ZW1zKCkpXG4gICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCd0aW1lbGluZS1pdGVtJylcbiAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDMubWF4KFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5vcHRpb25zLml0ZW0ubWluSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAsIHlTY2FsZShkLmR1cmF0aW9uKCkpXG4gICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJyxpbm5lcldpZHRoKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsICcgKyB5U2NhbGUoZC5zdGFydCkgKyAnKSc7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBicnVzaCA9IHRoaXMuX2JydXNoID0gZDMuc3ZnLmJydXNoKClcbiAgICAgICAgICAgICAgICAueSh5U2NhbGUpXG4gICAgICAgICAgICAgICAgLm9uKCdicnVzaGVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXh0U3RhcnQgPSB5U2NhbGUoYnJ1c2guZXh0ZW50KClbMF0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXh0RW5kICAgPSB5U2NhbGUoYnJ1c2guZXh0ZW50KClbMV0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXI6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAsIHNlbGVjdGVkIDogW11cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dFN0YXJ0ICE9PSBleHRFbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI2JhbmQnKS5zZWxlY3RBbGwoJ3JlY3QudGltZWxpbmUtaXRlbScpLmVhY2goZnVuY3Rpb24oaSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh5U2NhbGUoaS5zdGFydCkgPD0gZXh0RW5kKSAmJiAoeVNjYWxlKGkuZW5kKSAgID49IGV4dFN0YXJ0KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5zZWxlY3RlZC5wdXNoKGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLmNsZWFyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGF0Lm9wdGlvbnMub24uYnJ1c2hlbmQocmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIHlCcnVzaCA9IGJhbmQuYXBwZW5kKCdzdmcnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsJ2JydXNoJylcbiAgICAgICAgICAgICAgICAuY2FsbChicnVzaCk7XG4gICAgICAgICAgICB5QnJ1c2guc2VsZWN0QWxsKCdyZWN0JylcbiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLGlubmVyV2lkdGgpO1xuXG4gICAgICAgICAgICB2YXIgeUF4aXMgPSB0aW1lbGluZS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsJ2F4aXMnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCd0cmFuc2xhdGUoJyArICgoLjI1KmlubmVyV2lkdGgpIC0gdGhpcy5vcHRpb25zLm1hcmdpbi5sZWZ0KSArICcsJyArIHRoaXMub3B0aW9ucy5tYXJnaW4udG9wICsgICcpJyk7XG5cbiAgICAgICAgICAgIHZhciBheGlzID0gZDMuc3ZnLmF4aXMoKVxuICAgICAgICAgICAgICAgIC5zY2FsZSh5U2NhbGUpXG4gICAgICAgICAgICAgICAgLm9yaWVudCh0aGlzLm9wdGlvbnMub3JpZW50YXRpb24pXG4gICAgICAgICAgICAgICAgLnRpY2tTaXplKDYsIDApXG4gICAgICAgICAgICAgICAgLnRpY2tWYWx1ZXModGhpcy5fc291cmNlLnRpY2tWYWx1ZXMoKSlcbiAgICAgICAgICAgICAgICAudGlja0Zvcm1hdChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuX3NvdXJjZS50aWNrRm9ybWF0KGl0ZW0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgeUF4aXMuY2FsbChheGlzKTtcbiAgICAgICAgfVxuICAgICAgICAsIF9jb2xsYXBzZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9leHBhbmRlZCkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgICh0aGlzLm9wdGlvbnMub24uY29sbGFwc2UgfHwgdHlwZW9mIHRoaXMub3B0aW9ucy5vbi5jb2xsYXBzZSA9PT0gJ2Z1bmN0aW9uJykgXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uLmNvbGxhcHNlKCk7XG4gICAgICAgICAgICAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lbGluZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5fZXhwYW5kZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIEwuRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl9jb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICBMLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWV4cGFuZGVkJyk7XG4gICAgICAgICAgICB0aGlzLl9tYXAub2ZmKCdjbGljaycsIHRoaXMuX2NvbGxhcHNlLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIEwuY29udHJvbC50aW1lbGluZSA9IGZ1bmN0aW9uKG1hcCxzb3VyY2Usb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IEwuQ29udHJvbC5UaW1lbGluZShtYXAsc291cmNlLG9wdGlvbnMpO1xuICAgIH07XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMvYXN5bmNJbml0JywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJ1xuXSwgZnVuY3Rpb24oJCxfKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBc3luY0luaXQgPSB7XG4gICAgICAgICAgJGRlZjogbnVsbFxuICAgICAgICAsIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRlZi5wcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBc3luY0luaXQ7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMvZG9td2F0Y2hlcicsIFtcbiAgICAnanF1ZXJ5JyBcbl0sIGZ1bmN0aW9uKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIERPTVdhdGNoZXIgPSB7XG4gICAgICAgIHdhdGNoRE9NIDogZnVuY3Rpb24obXMsc2VsLCRkZWYpIHtcbiAgICAgICAgICAgIGlmICghc2VsKSB0aHJvdyBcIkVtcHR5IHNlbGVjdG9yIGluIHdhdGNoRE9NKClcIjtcbiAgICAgICAgICAgIGlmICgkKHNlbCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGYgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoc2VsKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9mZignRE9NTm9kZUluc2VydGVkJywgZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5vbignRE9NTm9kZUluc2VydGVkJywgZik7XG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkub2ZmKCdET01Ob2RlSW5zZXJ0ZWQnLCBmKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9LCBtcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRE9NV2F0Y2hlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy9mZXRjaHhtbCcsIFtcbiAgICAnanF1ZXJ5J1xuXSwgZnVuY3Rpb24oJCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgRmV0Y2hYTUwgPSB7XG4gICAgICAgIC8vIHJldHVybiBhbiBvYmplY3QgaW1wbGVtZW50aW5nIHRoZSBQcm9taXNlIGludGVyZmFjZVxuICAgICAgICAvLyB3aGVuIHN1Y2Nlc3NmdWwsIHRoZSBQcm9taXNlIHJldHVybnMgdGhlIGRhdGEgZmV0Y2hlZFxuICAgICAgICAvLyBieSB0aGUgYWpheCByZXF1ZXN0XG4gICAgICAgIC8vIGRhdGEgcmV0dXJuZWQgYnkgdGhlIHByb21pc2UgaXMgYSBEb2N1bWVudFxuICAgICAgICBmZXRjaFhNTCA6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgdmFyICRnZXQgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6ICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAneG1sJyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAkZ2V0LnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgICAgICRnZXQucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gJGdldC5wcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBGZXRjaFhNTDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy94bWwyaHRtbCcsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZSdcbl0sIGZ1bmN0aW9uKCQsXykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgWE1MMkhUTUwgPSB7XG4gICAgICAgIF9kb2M6IGZ1bmN0aW9uKHhtbCkge1xuICAgICAgICAgICAgdmFyIHhtbERvYztcbiAgICAgICAgICAgIGlmICh0eXBlb2YgeG1sID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHhtbERvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoeG1sLCd0ZXh0L3htbCcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh4bWwgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xuICAgICAgICAgICAgICAgIHhtbERvYyA9IHhtbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIGRvY3VtZW50IGlucHV0IGluIFhNTDJIVE1MXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHhtbERvYyA9PSBudWxsIHx8ICgheG1sRG9jLmhhc093blByb3BlcnR5KCdnZXRFbGVtZW50c0J5VGFnTmFtZScpICYmIHhtbERvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgncGFyc2VyZXJyb3InKS5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBkb2N1bWVudCBpbiB4bWwyaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB4bWxEb2M7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIHJldHVybiBIVE1MIG9yIEpTT04gc3RyaW5nIGZyb20gWFNMVCB0cmFuc2Zvcm1hdGlvblxuICAgICAgICB4bWwyaHRtbDogZnVuY3Rpb24oeG1sLHhzbCxwYXJhbXMsbW9kZSkge1xuICAgICAgICAgICAgdmFyIHhtbERvYyA9IHRoaXMuX2RvYyh4bWwpLFxuICAgICAgICAgICAgICAgIHhzbERvYyA9IHRoaXMuX2RvYyh4c2wpO1xuICAgICAgICAgICAgdmFyIHhzbHRQcm9jZXNzb3IgPSBuZXcgWFNMVFByb2Nlc3NvcigpO1xuICAgICAgICAgICAgeHNsdFByb2Nlc3Nvci5pbXBvcnRTdHlsZXNoZWV0KHhzbERvYyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBfLmVhY2goXy5rZXlzKHBhcmFtcyksIGZ1bmN0aW9uKGtleSl7XG4gICAgICAgICAgICAgICAgICAgIHhzbHRQcm9jZXNzb3Iuc2V0UGFyYW1ldGVyKG51bGwsa2V5LHBhcmFtc1trZXldKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBkb2MgPSB4c2x0UHJvY2Vzc29yLnRyYW5zZm9ybVRvRG9jdW1lbnQoeG1sRG9jKTtcbiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy88dHJhbnNmb3JtaWl4OnJlc3VsdD4uLi48L3RyYW5zZm9ybWlpeDpyZXN1bHQ+XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRvYy5kb2N1bWVudEVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZG9jLmRvY3VtZW50RWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCA9IGRvYy5ib2R5LmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGluIFhTTFQgdHJhbnNmb3JtOiAnICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBYTUwySFRNTDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9hcnRpY2xlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ21peGlucy9mZXRjaHhtbCdcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuICAgICwgJ21peGlucy94bWwyaHRtbCdcbiAgICAsICd0ZXh0IXhzbC9nZW9qc29uLnhzbCdcbiAgICAsICd0ZXh0IXhzbC9jaXRlZC1yYW5nZS54c2wnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRmV0Y2hYTUwsQXN5bmNJbml0LFhNTDJIVE1MLGdlb0pzb25Yc2wsY2l0ZWRSYW5nZVhzbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB2YXIgJGdldCA9IHRoYXQuZmV0Y2hYTUwodGhhdC5nZXQoJ3BhdGgnKSk7XG4gICAgICAgICAgICAkLndoZW4oJGdldCkuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zZXQoJ3htbCcsIGRhdGEpO1xuICAgICAgICAgICAgICAgIHRoYXQuX21rR2VvanNvbigpO1xuICAgICAgICAgICAgICAgIHRoYXQuX21rQ2l0ZWRSYW5nZSgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGF0Lmdlb2pzb24gIT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0KCdwbGFjZVR5cGUnLCB0aGF0Lmdlb2pzb24ucHJvcGVydGllcy5sYXllcik7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgLy9UT0RPOiAneG1sJzogc2VyaWFsaXplPyBhbmQgY2FjaGUgdG8gbG9jYWxzdG9yYWdlXG4gICAgICAgICAgICAvLyBhZGQgYWRhcHRlciBmb3IgYWNjZXNzIHRocm91Z2ggLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgXCJ4bWxcIiAgICAgICA6IG51bGwgICAgLy8gRG9jdW1lbnRcbiAgICAgICAgICAgICwgXCJwbGFjZVR5cGVcIiA6IG51bGxcbiAgICAgICAgICAgICwgXCJpY29uVXJsXCIgICA6ICcnXG4gICAgICAgICAgICAsIFwiY2l0ZWRSYW5nZVwiOiB7fVxuICAgICAgICB9LFxuICAgICAgICBnZW9qc29uOiBudWxsLFxuICAgICAgICBnZXRHZW9qc29uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdlb2pzb24gPT09IG51bGwpXG4gICAgICAgICAgICAgICAgdGhpcy5fbWtHZW9qc29uKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZW9qc29uO1xuICAgICAgICB9LFxuICAgICAgICBfbWtHZW9qc29uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGpzb25TdHJpbmcgPSB0aGlzLnhtbDJodG1sKHRoaXMuZ2V0KCd4bWwnKSwgZ2VvSnNvblhzbCwge30sICd0ZXh0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZW9qc29uID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgZ2VvanNvbjogXCIgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfbWtDaXRlZFJhbmdlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGpzb25TdHJpbmcgPSB0aGlzLnhtbDJodG1sKHRoaXMuZ2V0KCd4bWwnKSwgY2l0ZWRSYW5nZVhzbCwge30sICd0ZXh0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoJ2NpdGVkUmFuZ2UnLCBKU09OLnBhcnNlKGpzb25TdHJpbmcpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgY2l0ZWQgcmFuZ2UganNvbjogXCIgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1vZGVsLnByb3RvdHlwZSxGZXRjaFhNTCk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1vZGVsLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNb2RlbC5wcm90b3R5cGUsWE1MMkhUTUwpO1xuICAgIHJldHVybiBBcnRpY2xlTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvaXNzdWUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbW9kZWxzL2FydGljbGUnXG4gICAgLCAnY29sbGVjdGlvbnMvYXJ0aWNsZXMnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBcnRpY2xlTW9kZWwsQXJ0aWNsZUNvbGxlY3Rpb24sQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBJc3N1ZU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmICAgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB2YXIgYXJ0ZGlyICA9IGFyZ3MuY29uZmlnLmFydGljbGVzLnBhdGhCYXNlO1xuICAgICAgICAgICAgaWYgKCFhcnRkaXIubWF0Y2goL1xcLyQvKSkgYXJ0ZGlyICs9ICcvJztcbiAgICAgICAgICAgIHZhciBmaWxlcyAgID0gYXJncy5jb25maWcuYXJ0aWNsZXMuZmlsZXM7XG4gICAgICAgICAgICB2YXIgY29sICAgICA9IG5ldyBBcnRpY2xlQ29sbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgICAgIHRoYXQuc2V0KCdjb2xsZWN0aW9uJywgY29sKTtcbiAgICAgICAgICAgIC8vIGZpeCBsZW5ndGggb2YgYXJ0aWNsZXMgYXJyYXlcbiAgICAgICAgICAgIHZhciBhcnRpY2xlcyA9IF8ubWFwKF8ucmFuZ2UoZmlsZXMubGVuZ3RoKSwgZnVuY3Rpb24oKXtyZXR1cm4gdW5kZWZpbmVkO30pO1xuICAgICAgICAgICAgLy8gYXJ0aWNsZXMgY29uc3RydWN0ZWQgc3luYywgc28gYXJ0aWNsZSBvYmplY3RzIGFkZGVkIHRvIGxpc3QgYnkgaW5kZXhcbiAgICAgICAgICAgIF8uZWFjaChmaWxlcywgZnVuY3Rpb24oZmlsZSxpKSB7XG4gICAgICAgICAgICAgICAgYXJ0aWNsZXNbaV0gPSBuZXcgQXJ0aWNsZU1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZWlkOiAgaSxcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZWRpcjogYXJ0ZGlyLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiAgICAgICBhcnRkaXIgKyBmaWxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBpbml0cyA9IF8ubWFwKGFydGljbGVzLCBmdW5jdGlvbihhcnRpY2xlKXtyZXR1cm4gYXJ0aWNsZS5pbml0KCk7fSk7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkobnVsbCxpbml0cykuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb2wuYWRkKGFydGljbGVzKTtcbiAgICAgICAgICAgICAgICB0aGF0LnNldEljb25zKCk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGluaXRzLCBmdW5jdGlvbigkcHJvbWlzZSl7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkcHJvbWlzZS5zdGF0ZSgpID09PSAncmVqZWN0ZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTsgLy8gbm90IHJlLXNldCBvbiBmYWlsdXJlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtYXAgbWFya2VyIGljb25zIGZpbGVuYW1lIHZhbHVlcyBhcmUgc2V0IGhlcmU7IGljb24gY29sb3JzIGFyZSBhc3NpZ25lZFxuICAgICAgICAvLyByYW5kb21seSwgc28gdG8gc3VwcG9ydCBhIGNvbnNpc3RlbmN5IGJldHdlZW4gdGhlIGNvbG9yIGFuZCB0aGUgcGxhY2UtdHlwZVxuICAgICAgICAvLyBsYXllciwgdGhleSBtdXN0IGJlIGFzc2lnbmVkIGFzIGEgZ3JvdXBcbiAgICAgICAgLCBzZXRJY29uczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaWNjb25maWcgID0gdGhhdC5jb25maWcubWFya2Vycy5pY29ucztcbiAgICAgICAgICAgIHZhciBpY29uRmlsZXMgPSBfLnNodWZmbGUoXy5mbGF0dGVuKFxuICAgICAgICAgICAgICAgIF8ubWFwKGljY29uZmlnLCBmdW5jdGlvbihlbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5tYXAoZW50cnkuZmlsZXMsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeS5kaXIuY29uY2F0KGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdEljb25GaWxlID0gaWNvbkZpbGVzLnBvcCgpO1xuICAgICAgICAgICAgdmFyIGljb25zID0gW107XG4gICAgICAgICAgICAvLyBkbyBtYXAgbWFya2VyIGljb24gaW5pdGlhbGl6YXRpb247IHRoaXMgc2VlbXMgbGlrZSBpdCBzaG91bGRcbiAgICAgICAgICAgIC8vIGJlIGlzb2xhdGVkIHRvIHRoZSBNYXBWaWV3IG9yIE1hcmtlclZpZXcsIGJ1dCBpcyBkYXRhIHVzZWRcbiAgICAgICAgICAgIC8vIGVsc2V3aGVyZSBpbiB0aGUgYXBwbGljYXRpb24sIHNvIHRoZXkgYXJlIGFzc2lnbmVkIGhlcmVcbiAgICAgICAgICAgIHRoYXQuZ2V0KCdjb2xsZWN0aW9uJykuZm9yRWFjaChmdW5jdGlvbihhcnRpY2xlLGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2VvanNvbiA9IChhcnRpY2xlLmdldEdlb2pzb24oKSB8fCB7XCJwcm9wZXJ0aWVzXCI6e319KTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBnZW9qc29uLnByb3BlcnRpZXMubGF5ZXI7XG4gICAgICAgICAgICAgICAgaWNvbnNbbGF5ZXJdID0gaWNvbnNbbGF5ZXJdIHx8IGljb25GaWxlcy5wb3AoKSB8fCBkZWZhdWx0SWNvbkZpbGU7XG4gICAgICAgICAgICAgICAgYXJ0aWNsZS5zZXQoJ2ljb25VcmwnLCBpY29uc1tsYXllcl0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0dXJuIGFydGljbGUgb2JqZWN0IGNvcnJlc3BvbmRpbmcgdG8gYXJndW1lbnQ7XG4gICAgICAgIC8vIGFyZ3VtZW50IG1heSBiZSBlaXRoZXIgYW4gaW5kZXggaW50byB0aGUgY29sbGVjdGlvblxuICAgICAgICAvLyAoZS5nLiwgd2hlbiBwcm92aWRlZCBieSBhIHVybCkgb3IgYW4gQXJ0aWNsZU1vZGVsXG4gICAgICAgIC8vIChlLmcuLCB3aGVuIHNlbGVjdGVkIGJ5IGEgbWFwIG1hcmtlcikgXG4gICAgICAgICwgZ2V0QXJ0aWNsZTogZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgdmFyIGFydDtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLmdldCgnY29sbGVjdGlvbicpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcnRpY2xlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGFydCA9IGFydGljbGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcnRpY2xlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJ0aWNsZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBhcnQgPSBjb2wuYXQoYXJ0aWNsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXJ0O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoSXNzdWVNb2RlbC5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gSXNzdWVNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9tYXAnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcE1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICQuZ2V0SlNPTihhcmdzLmNvbmZpZy5tYXAuY29uZmlnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zZXQoJ21hcGNvbmZpZycsIGRhdGEpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihqcXhociwgdGV4dFN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGxvYWQgbWFwIGNvbmZpZyBmaWxlOiAnICsgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgXCJtYXBjb25maWdcIiA6IHt9XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWFwTW9kZWwucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIE1hcE1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgncm91dGVzL3JvdXRlcicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtb2RlbHMvZXJyb3IvdXNlcidcbiAgICAsICd2aWV3cy9lcnJvci91c2VyJ1xuICAgICwgJ3ZpZXdzL2NsZWFyJ1xuICAgICwgJ2NvbnRyb2xsZXJzL2lzc3VlJ1xuICAgICwgJ2NvbnRyb2xsZXJzL21hcCdcbiAgICAsICd2aWV3cy9tZW51J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLFVzZXJFcnJvck1vZGVsLFVzZXJFcnJvclZpZXcsQ2xlYXJWaWV3LElzc3VlQ29udHJvbGxlcixNYXBDb250cm9sbGVyLE1lbnVWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBSb3V0ZXIgPSBCYWNrYm9uZS5Sb3V0ZXIuZXh0ZW5kKHtcbiAgICAgICAgICBwYWdlcyAgIDoge30gICAvLyBjb25maWcgZm9yIHN1cHBvcnRlZCBwYWdlc1xuICAgICAgICAsIGNvbmZpZyAgOiB7fSAgIC8vIGdsb2JhbCBzaXRlIGNvbmZpZ3VyYXRpb24sIGkuZS4sIHNpdGUuanNvblxuICAgICAgICAsIGlzc3VlQ29udHJvbGxlciA6IG51bGwgLy8gSXNzdWVNb2RlbCBmb3IgdGhpcyBhcHBcbiAgICAgICAgLCBtYXBDb250cm9sbGVyICAgOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5jb25maWcgPSBvcHRzLmNvbmZpZztcbiAgICAgICAgICAgIHRoaXMucGFnZXMgID0gb3B0cy5jb25maWcucGFnZXM7XG4gICAgICAgICAgICB0aGlzLmlzc3VlQ29udHJvbGxlciA9IG5ldyBJc3N1ZUNvbnRyb2xsZXIoe1xuICAgICAgICAgICAgICAgICAgcm91dGVyOiB0aGlzXG4gICAgICAgICAgICAgICAgLCBjb25maWc6IHRoaXMuY29uZmlnIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmlzc3VlQ29udHJvbGxlci5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBwYWdlcy5yb3V0ZXIuaGlzdG9yeSA9IHRydWUgYnkgZGVmYXVsdCwgaWYgbWlzc2luZ1xuICAgICAgICAgICAgICAgIGlmIChfLmhhcyh0aGF0LnBhZ2VzLnJvdXRlciwnaGlzdG9yeScpICYmICEhdGhhdC5wYWdlcy5yb3V0ZXIuaGlzdG9yeSkge1xuICAgICAgICAgICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKEJhY2tib25lLmhpc3RvcnkuZnJhZ21lbnQgPT09IGZyYWdtZW50KSByZXR1cm47XG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKGZyYWdtZW50LG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgICwgcGFnZTogZnVuY3Rpb24ocGFnZSkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHBhZ2VDb25maWc7XG4gICAgICAgICAgICB2YXIgbWFwUGFnZSA9IGZhbHNlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIXBhZ2UpIHBhZ2UgPSB0aGlzLnBhZ2VzLmhvbWU7XG4gICAgICAgICAgICAgICAgcGFnZUNvbmZpZyA9IHRoaXMucGFnZXMucGFnZXNbcGFnZV07XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VDb25maWcgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNvbmZpZyBpbiByb3V0ZXIvcGFnZScpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhZ2UoJzQwNCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3IENsZWFyVmlldygpLnJlbmRlcigpO1xuICAgICAgICAgICAgXy5lYWNoKHBhZ2VDb25maWcsIGZ1bmN0aW9uKHBjKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXdOYW1lO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogdGhhdC5jb25maWdcbiAgICAgICAgICAgICAgICAgICAgLCBpc3N1ZTogIHRoYXQuaXNzdWVDb250cm9sbGVyLm1vZGVsXG4gICAgICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGF0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBjbG9uZSBjb25maWcgdG8gYXZvaWQgZ2xvYmFsIGNoYW5nZXNcbiAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYykpO1xuICAgICAgICAgICAgICAgIGlmIChfLmhhcyhjb25maWcsICd2aWV3JykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlld05hbWUgPSBjb25maWcudmlldztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF8uaGFzKGNvbmZpZywgJ3BhcnRpYWwnKSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3TmFtZSA9ICd2aWV3cy9wYXJ0aWFsJztcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnBhcnRpYWwucGFnZSA9IHRoYXQucGFnZXMucGF0aEJhc2UgKyBjb25maWcucGFydGlhbC5wYWdlO1xuICAgICAgICAgICAgICAgICAgICBhcmdzID0gXy5leHRlbmQoYXJncyxjb25maWcucGFydGlhbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfLmhhcyhjb25mZywgJ2Z1bGwnKSkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGNvbmZpZy5mdWxsLnBhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHBhZ2UgdHlwZSBpbiByb3V0ZXI6ICcgKyBwYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHZpZXdOYW1lID09PSAndmlld3MvbWFwJykge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcENvbnRyb2xsZXIgPSBuZXcgTWFwQ29udHJvbGxlcihhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgbWFwUGFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZShbdmlld05hbWVdLCBmdW5jdGlvbihWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IG5ldyBWaWV3KGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdi5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIW1hcFBhZ2UpIHRoYXQubWFwQ29udHJvbGxlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLCBhcnRpY2xlIDogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgY29uZmlnOiB0aGF0LmNvbmZpZ1xuICAgICAgICAgICAgICAgICwgaXNzdWU6ICB0aGF0Lmlzc3VlQ29udHJvbGxlci5tb2RlbFxuICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGF0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCQoJyN0aXRsZXBhZ2UnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJCgnI3RpdGxlcGFnZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCQoJyNwYWdlJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICQoJyNwYWdlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhhdC5tYXBDb250cm9sbGVyID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXBDb250cm9sbGVyID0gbmV3IE1hcENvbnRyb2xsZXIoYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJCgnI21lbnUnKS5jaGlsZHJlbigpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBNZW51VmlldyhhcmdzKS5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNlbGVjdCB0aGUgYXJ0aWNsZSBpbmRpY2F0ZWQgYnkgdGhlIHVybCdzIHJvdXRlIG9ubHkgYWZ0ZXJcbiAgICAgICAgICAgIC8vIHRoZSBtYXAgaGFzIGluaXRpYWxpemVkXG4gICAgICAgICAgICB0aGF0Lm1hcENvbnRyb2xsZXIuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFydGljbGUgPSB0aGF0Lmlzc3VlQ29udHJvbGxlci5tb2RlbC5nZXRBcnRpY2xlKGlkKTsgXG4gICAgICAgICAgICAgICAgYXJ0aWNsZS50cmlnZ2VyKCdhY3RpdmUnLCBhcnRpY2xlKTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gUm91dGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgndmlld3MvYXBwJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJyxcbiAgICAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIHNpZ25hbCA9IHt9O1xuICAgIHZhciBBcHBWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJ2JvZHknLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcHBWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeSdcbiAgICAsICdtaXhpbnMveG1sMmh0bWwnXG4gICAgLCAndGV4dCF4c2wvYXJ0aWNsZS54c2wnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsR2FsbGVyeVZpZXcsWE1MMkhUTUwseHNsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgaWQ6ICdhcnRpY2xlJyxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRlbCA9ICQoJyMnICsgdGhhdC5pZCk7XG4gICAgICAgICAgICBpZiAodGhhdC4kZWwuZmluZCgnIycgKyB0aGF0Lm1vZGVsLmNpZCkubGVuZ3RoICE9PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBodG1sID0gdGhpcy54bWwyaHRtbChcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLmdldCgneG1sJyksIHhzbCwgXG4gICAgICAgICAgICAgICAge1wiYXJ0aWNsZS1kaXJcIjogdGhhdC5jb25maWcuYXJ0aWNsZXMucGF0aEJhc2VcbiAgICAgICAgICAgICAgICAsIFwiaWNvblVybFwiICAgIDogdGhhdC5tb2RlbC5nZXQoJ2ljb25VcmwnKVxuICAgICAgICAgICAgICAgICwgXCJjaWRcIiAgICAgICAgOiB0aGF0Lm1vZGVsLmNpZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICQoJy5hcnRpY2xlLWNvbnRlbnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcjJyt0aGlzLmlkKS5hcHBlbmQoaHRtbCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhcnRpY2xlIGxvYWQgZXJyb3I6IFwiICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBHYWxsZXJ5VmlldygpLnJlbmRlcigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcjZm9vdGVyJykucmVtb3ZlKClcbiAgICAgICAgICAgICAgICAkKCdhcnRpY2xlJykucmVtb3ZlQ2xhc3MoJ2JlZm9yZS1mb290ZXInKS5hZGRDbGFzcygnbm8tZm9vdGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0LiRlbC5maW5kKCcuYXJ0aWNsZS1tYXJrZXInKS5jbGljayhmdW5jdGlvbihpLGVsdCkge1xuICAgICAgICAgICAgICAgIHRoYXQubW9kZWwudHJpZ2dlcigndG9nZ2xlJywgdGhhdC5tb2RlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGF0O1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKCkgeyAvKiByZXRhaW4gKi99LFxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKEFydGljbGVWaWV3LnByb3RvdHlwZSxYTUwySFRNTCk7XG4gICAgcmV0dXJuIEFydGljbGVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9jbGVhcicsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZScsXG4gICAgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHRtcGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIENsZWFyVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICdib2R5JyxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJ2JvZHknKS5lbXB0eSgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIENsZWFyVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvaXNzdWUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9pc3N1ZS5odG1sJ1xuICAgICwgJ3ZpZXdzL2FydGljbGUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsdG1wbCxBcnRpY2xlVmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgSXNzdWVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogICAgICAgICAnI2lzc3VlJyxcbiAgICAgICAgdGVtcGxhdGU6ICAgXy50ZW1wbGF0ZSh0bXBsKSxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQodG1wbCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlckFydGljbGU6IGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgIG5ldyBBcnRpY2xlVmlldyh7XG4gICAgICAgICAgICAgICAgICBtb2RlbDogIGFydGljbGVcbiAgICAgICAgICAgICAgICAsIGNvbmZpZzogdGhpcy5tb2RlbC5jb25maWdcbiAgICAgICAgICAgICAgICAsIGlzc3VlOiAgdGhpc1xuICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGlzLm1vZGVsLnJvdXRlclxuICAgICAgICAgICAgfSkucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gSXNzdWVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tYXAnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbGVhZmxldCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21hcC5odG1sJ1xuICAgICwgJ3ZpZXdzL21hcmtlcidcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEwsbWFwUGFydGlhbCxNYXJrZXJWaWV3LEFzeW5jSW5pdCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICBpZDogICAgICAnbWFwJ1xuICAgICAgICAsIHRhZ05hbWU6ICdkaXYnXG4gICAgICAgICwgbWFya2VyVmlld3M6IFtdIC8vIHN1YnZpZXdzXG4gICAgICAgICwgbWFwY29uZmlnOiB7fVxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQubW9kZWwgPSBhcmdzLm1vZGVsO1xuICAgICAgICAgICAgdGhhdC5pc3N1ZSA9IGFyZ3MuaXNzdWU7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkoe30sW3RoYXQuaXNzdWUuaW5pdCgpLCB0aGF0Lm1vZGVsLmluaXQoKV0pLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXBjb25maWcgPSB0aGF0Lm1vZGVsLmdldCgnbWFwY29uZmlnJyk7XG4gICAgICAgICAgICAgICAgaWYgKCQoJyMnICsgdGhpcy5pZCkubGVuZ3RoID4gMCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmICgkKCcjJyArIHRoaXMuaWQpLmNoaWxkcmVuKCkubGVuZ3RoID4gMCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHRoYXQuX2luaXRNYXAoKTsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9pbml0TWFwIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoJCgnIycgKyB0aGlzLmlkKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKG1hcFBhcnRpYWwpO1xuICAgICAgICAgICAgICAgIHRoYXQubWFwID0gbmV3IEwuTWFwKHRoYXQubWFwY29uZmlnLmlkLCB0aGF0Lm1hcGNvbmZpZy5tYXApO1xuICAgICAgICAgICAgICAgIG5ldyBMLlRpbGVMYXllcih0aGF0Lm1hcGNvbmZpZy50aWxlTGF5ZXIudXJsLCB0aGF0Lm1hcGNvbmZpZy50aWxlTGF5ZXIub3B0cykuYWRkVG8odGhhdC5tYXApO1xuICAgICAgICAgICAgICAgIG5ldyBMLmNvbnRyb2wuc2NhbGUodGhhdC5tYXBjb25maWcuc2NhbGUpLmFkZFRvKHRoYXQubWFwKTsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhhdC5tYXJrZXJWaWV3cyA9IF8ubWFwKHRoYXQuaXNzdWUuZ2V0KCdjb2xsZWN0aW9uJykubW9kZWxzLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTWFya2VyVmlldyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsICAgICA6IGFydGljbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICwgbWFwICAgICAgIDogdGhhdC5tYXBcbiAgICAgICAgICAgICAgICAgICAgICAgICwgbWFwY29uZmlnIDogdGhhdC5tYXBjb25maWdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLCByZW5ld1ZpZXdzIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1hcmtlclZpZXdzID0gXy5tYXAodGhhdC5pc3N1ZS5nZXQoJ2NvbGxlY3Rpb24nKS5tb2RlbHMsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFydGljbGUubWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgICAgICBhcnRpY2xlLm1hcmtlclZpZXcgPSBuZXcgTWFya2VyVmlldyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsICAgICA6IGFydGljbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICwgbWFwICAgICAgIDogdGhhdC5tYXBcbiAgICAgICAgICAgICAgICAgICAgICAgICwgbWFwY29uZmlnIDogdGhhdC5tYXBjb25maWdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhcnRpY2xlLm1hcmtlclZpZXc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0Lm1hcmtlclZpZXdzLCBmdW5jdGlvbihtdikgeyBtdi5yZW5kZXIoKTsgfSk7XG4gICAgICAgICAgICB0aGF0LnRyaWdnZXIoJ21hcmtlcnMnLCB0aGF0Lm1hcmtlclZpZXdzKTtcbiAgICAgICAgfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Ll9pbml0TWFwKCk7XG4gICAgICAgICAgICBfLmZvckVhY2godGhhdC5tYXJrZXJWaWV3cywgZnVuY3Rpb24obXYpIHsgbXYucmVuZGVyKCkgfSk7XG4gICAgICAgICAgICB0aGF0LnRyaWdnZXIoJ21hcmtlcnMnLCB0aGF0Lm1hcmtlclZpZXdzKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1hcFZpZXcucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIE1hcFZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL21hcmtlcicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21hcmtlci5odG1sJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvbWFya2VyLWxlZ2VuZC5odG1sJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHRtcGwsbGVnZW5kUGFydGlhbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFya2VyVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICB0ZW1wbGF0ZTogXy50ZW1wbGF0ZSh0bXBsKVxuICAgICAgICAsIGVsOiAnJ1xuICAgICAgICAsIG1hcmtlckxheWVyOiBudWxsXG4gICAgICAgICwgbWFwOiBudWxsXG4gICAgICAgICwgbWFwY29uZmlnOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgICAgIHRoYXQubWFwY29uZmlnID0gYXJncy5tYXBjb25maWc7XG4gICAgICAgICAgICB0aGF0LmluaXRNYXJrZXJMYXllcigpO1xuICAgICAgICB9XG4gICAgICAgICwgaW5pdE1hcmtlckxheWVyIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgICA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZ2VvanNvbiA9IHRoaXMubW9kZWwuZ2V0R2VvanNvbigpO1xuICAgICAgICAgICAgdmFyIGljb25Db25maWcgPSB0aGF0Lm1hcGNvbmZpZy5mZWF0dXJlcy5pY29uO1xuICAgICAgICAgICAgaWNvbkNvbmZpZy5pY29uVXJsID0gKHRoaXMubW9kZWwuZ2V0KCdpY29uVXJsJykgfHwgJycpO1xuICAgICAgICAgICAgdmFyIGljb24gPSBMLmljb24oaWNvbkNvbmZpZyk7XG4gICAgICAgICAgICB0aGF0Lm1hcmtlckxheWVyID0gTC5nZW9Kc29uKGdlb2pzb24sIHtcbiAgICAgICAgICAgICAgICBvbkVhY2hGZWF0dXJlOiBmdW5jdGlvbiAoZmVhdHVyZSwgbWFwTWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgcG9wdXAgdG8gdGhpcyBtYXJrZXJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvcHVwID0gTC5wb3B1cCh0aGF0Lm1hcGNvbmZpZy5mZWF0dXJlcy5wb3B1cCk7XG4gICAgICAgICAgICAgICAgICAgIHBvcHVwLnNldENvbnRlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnRlbXBsYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnRpY2xlaWQ6ICB0aGF0Lm1vZGVsLmdldCgnYXJ0aWNsZWlkJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvanNvbjogICAgdGhhdC5tb2RlbC5nZXRHZW9qc29uKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5iaW5kUG9wdXAocG9wdXApO1xuICAgICAgICAgICAgICAgICAgICAvLyBvdmVycmlkZSB0aGUgZGVmYXVsdCBjbGljayBoYW5kbGVyIGZvciB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFya2VyLCB3aGljaCB3b3VsZCBjbG9zZSB0aGUgcG9wdXAgaWYgaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2VyZSBhbHJlYWR5IG9wZW5cbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudHJpZ2dlcignY2xpY2snLCBldnQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudHJpZ2dlcignbW91c2VvdmVyJywgZXZ0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwb2ludFRvTGF5ZXI6IGZ1bmN0aW9uIChmZWF0dXJlLCBsYXRsbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEwubWFya2VyKGxhdGxuZywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uICAgICAgICA6IGljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICwgY2xpY2thYmxlICAgOiAhIWZlYXR1cmUucHJvcGVydGllcy50ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAsIHRpdGxlICAgICAgIDogKGZlYXR1cmUucHJvcGVydGllcy5tYXJrZXJuYW1lIHx8ICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLCBvcGFjaXR5ICAgICA6IHRoYXQubWFwY29uZmlnLmZlYXR1cmVzLm9wYWNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICwgcmlzZU9uSG92ZXIgOiB0aGF0Lm1hcGNvbmZpZy5mZWF0dXJlcy5yaXNlT25Ib3ZlclxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLm1hcmtlckxheWVyLmFkZFRvKHRoaXMubWFwKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBNYXJrZXJWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tZW51JywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvbWVudS5odG1sJ1xuICAgICwgJ21peGlucy9kb213YXRjaGVyJ1xuICAgICwgJ3ZpZXdzL2FydGljbGUvbWVudSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxtZW51VG1wbCxET01XYXRjaGVyLEFydGljbGVNZW51Vmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWVudVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIHRlbXBsYXRlOiBfLnRlbXBsYXRlKG1lbnVUbXBsKSxcbiAgICAgICAgICBpZDogICAgICAnbWVudSdcbiAgICAgICAgLCB0YWdOYW1lOiAnZGl2J1xuICAgICAgICAsIGlzc3VlOiAgIG51bGxcbiAgICAgICAgLCBjb25maWc6ICB7fVxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgICAgICB0aGlzLmlzc3VlICA9IGFyZ3MuaXNzdWU7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoJCgnIycgKyB0aGF0LmlkKS5jaGlsZHJlbigpLmxlbmd0aCAhPT0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5jb25maWcubWVudTtcbiAgICAgICAgICAgIC8vIHJlbmRlciBlYWNoIGl0ZW0gZnJvbSB0aGUgY29uZmlnIGZpbGUgdG8gYSA8bGk+XG4gICAgICAgICAgICAvLyBtdXN0IGJlIGRvbmUgYXN5bmMgZHVlIHRvIHJldHJpZXZhbCBvZiBwYXJ0aWFsIGZpbGVzXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICAgICAgICAgICAvLyBjYWNoZSBvZiB0ZW1wbGF0ZSBzdHJpbmdzOiB1cmwgPT4gdGVtcGxcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZXMgPSB7fTtcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9ucyA9IHt9O1xuICAgICAgICAgICAgXy5lYWNoKGl0ZW1zLCBmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZXNbaXRlbS5wYXJ0aWFsXSA9ICcnO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZW51Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGl0ZW0uY29sbGVjdGlvbiA9PT0gXCJjb2xsZWN0aW9ucy9hcnRpY2xlc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uc1tpdGVtLmNvbGxlY3Rpb25dID0gdGhhdC5pc3N1ZS5nZXQoJ2NvbGxlY3Rpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuaGFuZGxlZCBjb2xsZWN0aW9uIHR5cGUgcmVxdWVzdGVkOiBcIiArIGl0ZW0uY29sbGVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZWFjaChfLmtleXModGVtcGxhdGVzKSwgZnVuY3Rpb24odXJsKSB7XG4gICAgICAgICAgICAgICAgdmFyICRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgcmVxdWlyZShbJ3RleHQhJyArIHVybF0sIGZ1bmN0aW9uKHRlbXBsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlc1t1cmxdID0gXy50ZW1wbGF0ZSh0ZW1wbCk7XG4gICAgICAgICAgICAgICAgICAgICRkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goJGRlZi5wcm9taXNlKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyByZW5kZXIgdGhlIG1lbnUgYXMgYSA8ZGl2PlxuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSAnJztcbiAgICAgICAgICAgICQud2hlbi5hcHBseSgkLCBwcm9taXNlcykuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goaXRlbXMsIGZ1bmN0aW9uKGl0ZW0saSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gaXRlbS5wYXJ0aWFsO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc29ydGVyID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJDb250ZW50ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0S2V5cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAncGFnZScgfHwgaXRlbS50eXBlID09PSAnc2VwJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSAodGVtcGxhdGVzW3VybF0pKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ21lbnUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uc1tpdGVtLmNvbGxlY3Rpb25dLm1vZGVscy5mb3JFYWNoKGZ1bmN0aW9uKG1vZGVsLGopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiAgICA9IGl0ZW0uaXRlbS5ocmVmLnJlcGxhY2UoJzppJywgaik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFtdiAgICAgPSBuZXcgQXJ0aWNsZU1lbnVWaWV3KHttb2RlbDptb2RlbH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgID0gYW12LnJlbmRlcih7aHJlZjogJyMnICsgaHJlZn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkbGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCBhbiA8bGk+IGVsZW1lbnQgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGkgPSAkKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubm9kZU5hbWUgPT09ICdCT0RZJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxpID0gJChyZXN1bHQuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQubm9kZU5hbWUgPT09ICdMSScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsaSA9ICQocmVzdWx0Lm91dGVySFRNTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGRvY3VtZW50IGVsZW1lbnQgZm9yIHN1Ym1lbnU6ICcgKyByZXN1bHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHJlc3VsdCB0eXBlIGZvciBzdWJtZW51OiAnICsgcmVzdWx0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGxpLmF0dHIoJ2RhdGEtc29ydC1rZXknKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZXJbJGxpLmF0dHIoJ2RhdGEtc29ydC1rZXknKV0gPSAkbGkuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZXJbJGxpLmZpbmQoJ2EnKS50ZXh0KCldID0gJGxpLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0S2V5cyA9IF8ua2V5cyhzb3J0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ydEtleXMuc29ydChmdW5jdGlvbihhLGIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5sb2NhbGVDb21wYXJlKGIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfLmVhY2goc29ydEtleXMsIGZ1bmN0aW9uKGtleSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViQ29udGVudCArPSBzb3J0ZXJba2V5XVswXS5vdXRlckhUTUw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gKHRlbXBsYXRlc1t1cmxdKSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHN1YkNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoJyMnICsgdGhhdC5pZCkuZW1wdHkoKS5hcHBlbmQodGhhdC50ZW1wbGF0ZSh7Y29udGVudDogY29udGVudH0pKTtcbiAgICAgICAgICAgICAgICAvLyBjb25maXJtIHRoYXQgdGhlIG1lbnUgaGFzIGxvYWRlZFxuICAgICAgICAgICAgICAgIHZhciAkZmFpbERlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICAkZmFpbERlZi5mYWlsKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC53YXRjaERPTSg1MDAsICcjJyArIHRoYXQuaWQsICRmYWlsRGVmKTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGJ1aWxkIG1lbnUuXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChNZW51Vmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgcmV0dXJuIE1lbnVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9wYWdlJywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21peGlucy9kb213YXRjaGVyJyxcbiAgICAndGV4dCFwYXJ0aWFscy9wYWdlLmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRE9NV2F0Y2hlcixwYWdlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBQYWdlVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICdib2R5JyxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICRkZWYudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoYXQuZWwpLmFwcGVuZChwYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53YXRjaERPTSgxMDAwLHRoYXQuZWwsJGRlZik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChQYWdlVmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgcmV0dXJuIFBhZ2VWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9wYXJ0aWFsJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ21peGlucy9kb213YXRjaGVyJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRE9NV2F0Y2hlcixBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFBhcnRpYWxWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJycsXG4gICAgICAgIHBhZ2U6ICcnLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5lbCAgID0gb3B0cy5lbDtcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHJlcXVpcmUoWyd0ZXh0IScgKyBvcHRzLnBhZ2VdLCBmdW5jdGlvbihodG1sKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5wYWdlID0gaHRtbDtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkd2F0Y2hEZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGF0LmluaXQoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhhdC5lbCkuYXBwZW5kKHRoYXQucGFnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hET00oMTAwMCx0aGF0LmVsLCR3YXRjaERlZik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChQYXJ0aWFsVmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgXy5leHRlbmQoUGFydGlhbFZpZXcucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIFBhcnRpYWxWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9tYXAvbGF5ZXInLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ2NvbnRyb2xsZXJzL21hcC9sYXllci9wbGFjZXR5cGUnXG4gICAgLCAnY29udHJvbGxlcnMvbWFwL2xheWVyL3RpbWVsaW5lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLENvbnRyb2xsZXIsUGxhY2VUeXBlQ29udHJvbGxlcixUaW1lbGluZUNvbnRyb2xsZXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcExheWVyQ29udHJvbGxlciA9IENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICAgICAgICB2aWV3ICAgOiBudWxsXG4gICAgICAgICwgcm91dGVyIDogbnVsbFxuICAgICAgICAsIG1hcCAgICA6IG51bGxcbiAgICAgICAgLCBjb250cm9sc2NvbmZpZyA6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICAgICAgdGhhdC52aWV3ID0gYXJncy52aWV3O1xuICAgICAgICAgICAgdGhhdC5tb2RlbCA9IGFyZ3MubW9kZWw7XG4gICAgICAgICAgICB0aGF0LmNvbnRyb2xzY29uZmlnID0gYXJncy5jb250cm9sc2NvbmZpZztcbiAgICAgICAgICAgIHRoYXQuc3ViQ29udHJvbGxlcnMgPSBbXTtcbiAgICAgICAgICAgIGlmIChfLmhhcyh0aGF0LmNvbnRyb2xzY29uZmlnLCAncGxhY2V0eXBlJykgJiYgdGhhdC5jb250cm9sc2NvbmZpZy5wbGFjZXR5cGUuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zdWJDb250cm9sbGVycy5wdXNoKG5ldyBQbGFjZVR5cGVDb250cm9sbGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICB2aWV3cyA6IHRoYXQudmlldy5tYXJrZXJWaWV3c1xuICAgICAgICAgICAgICAgICAgICAsIG1hcCAgIDogdGhhdC52aWV3Lm1hcFxuICAgICAgICAgICAgICAgICAgICAsIG1hcGNvbmZpZzogdGhhdC5tb2RlbC5hdHRyaWJ1dGVzLm1hcGNvbmZpZ1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfLmhhcyh0aGF0LmNvbnRyb2xzY29uZmlnLCAndGltZWxpbmUnKSAmJiB0aGF0LmNvbnRyb2xzY29uZmlnLnRpbWVsaW5lLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc3ViQ29udHJvbGxlcnMucHVzaChuZXcgVGltZWxpbmVDb250cm9sbGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJWaWV3cyA6IHRoYXQudmlldy5tYXJrZXJWaWV3c1xuICAgICAgICAgICAgICAgICAgICAsIG1hcCAgICAgICAgIDogdGhhdC52aWV3Lm1hcFxuICAgICAgICAgICAgICAgICAgICAsIHNpdGVjb25maWcgIDogdGhhdC5tb2RlbC5hdHRyaWJ1dGVzLmNvbmZpZ1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0LnN1YkNvbnRyb2xsZXJzLCBmdW5jdGlvbihzdWJDb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5UbyhzdWJDb250cm9sbGVyLCAnZmlsdGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX3VwZGF0ZU1hcmtlcnMoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmlsdGVyIHRoZSB2aXNpYmxlIG1hcCBtYXJrZXJzIGJhc2VkIG9uIHRoZSBwbGFjZXR5cGUgYW5kIHRoZVxuICAgICAgICAvLyB0aW1lbGluZSBsYXllciBjb250cm9sczsgdGhlIFwiaGlkZVwiIHN0YXRlIHRha2VzIHByZWNlZGVuY2UgaWZcbiAgICAgICAgLy8gdGhlIGNvbnRyb2xzIGRpc2FncmVlIChpLmUuLCBhIG1hcmtlciB0aGF0IGlzIGhpZGRlbiBvbiBhbnlcbiAgICAgICAgLy8gY29udHJvbCBpcyBoaWRkZW4gb24gdGhlIG1hcClcbiAgICAgICAgLCBfdXBkYXRlTWFya2VyczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc2hvdyA9IFtdLCBoaWRlID0gW107XG4gICAgICAgICAgICBfLmZvckVhY2godGhhdC5zdWJDb250cm9sbGVycywgZnVuY3Rpb24oc3ViQ29udHJvbGxlcil7XG4gICAgICAgICAgICAgICAgdmFyIHJlcyA9IHN1YkNvbnRyb2xsZXIuZ2V0RmlsdGVyU3RhdGUoKTtcbiAgICAgICAgICAgICAgICBoaWRlLnB1c2gocmVzLmhpZGUpXG4gICAgICAgICAgICAgICAgaGlkZSA9IF8uZmxhdHRlbihoaWRlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQudmlldy5tYXJrZXJWaWV3cywgZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IF8uZmluZChoaWRlLCBmdW5jdGlvbihoaWRkZW5MYXllcikge1xuICAgICAgICAgICAgICAgICAgICBoaWRkZW5MYXllciA9PT0gbWFya2VyVmlldy5tYXJrZXJMYXllclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghZm91bmQpXG4gICAgICAgICAgICAgICAgICAgIHNob3cucHVzaChtYXJrZXJWaWV3Lm1hcmtlckxheWVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHNob3csIGZ1bmN0aW9uKG1hcmtlckxheWVyKSB7XG4gICAgICAgICAgICAgICAgdGhhdC52aWV3Lm1hcC5hZGRMYXllcihtYXJrZXJMYXllcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZm9yRWFjaChoaWRlLCBmdW5jdGlvbihtYXJrZXJMYXllcikge1xuICAgICAgICAgICAgICAgIHRoYXQudmlldy5tYXAucmVtb3ZlTGF5ZXIobWFya2VyTGF5ZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gTWFwTGF5ZXJDb250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9tYXAvcGFuJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2NvbnRyb2xsZXJzL3Byb3RvdHlwZSdcbiAgICAsICdtaXhpbnMvZG9td2F0Y2hlcidcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxDb250cm9sbGVyLERPTVdhdGNoZXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcFBhbkNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgbWFwOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdGhpcy5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgICAgIGlmICghdGhpcy5tYXApXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5pbml0aWFsaXplZCBtYXBcIik7XG4gICAgICAgIH1cbiAgICAgICAgLCBfZml0TWFya2VyQm91bmRzIDogZnVuY3Rpb24obWFya2VyVmlld3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBlbHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJ0aWNsZScpO1xuICAgICAgICAgICAgaWYgKCFlbHQpIHJldHVybjtcbiAgICAgICAgICAgIHZhciBlZGdlUHRYID0gTC5Eb21VdGlsLmdldFZpZXdwb3J0T2Zmc2V0KGVsdCkueDtcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBMLmxhdExuZ0JvdW5kcyhfLm1hcChtYXJrZXJWaWV3cyxmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgdmFyIGxuZ0xhdCA9IG1hcmtlclZpZXcubW9kZWwuZ2V0R2VvanNvbigpLmdlb21ldHJ5LmNvb3JkaW5hdGVzLnNsaWNlKDApO1xuICAgICAgICAgICAgICAgIHJldHVybiBMLmxhdExuZyhsbmdMYXQucmV2ZXJzZSgpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmIChlZGdlUHRYID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXAuZml0Qm91bmRzKGJvdW5kcyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVkZ2VQdFggIT0gdGhhdC5tYXAuZ2V0U2l6ZSgpLngpIHtcbiAgICAgICAgICAgICAgICAvLyBtYXAgdW5kZXJuZWF0aCBhcnRpY2xlXG4gICAgICAgICAgICAgICAgdGhhdC5tYXAuZml0Qm91bmRzKGJvdW5kcywge1xuICAgICAgICAgICAgICAgICAgICAncGFkZGluZ0JvdHRvbVJpZ2h0JyA6IFtkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIC0gZWRnZVB0WCwwXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBtYXAgYmVzaWRlIGFydGljbGVcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcC5maXRCb3VuZHMoYm91bmRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoYXQubWFwLmludmFsaWRhdGVTaXplKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRqdXN0IG1hcCBwYW4vem9vbSB0byBtYWtlIGFsbCBtYXAgbWFya2VycyBvY2N1ciB0byB0aGUgXG4gICAgICAgIC8vIGxlZnQgb2YgZGl2I2FydGljbGUgaW4gd2lkZSBtb2RlXG4gICAgICAgICwgZml0TWFya2VyQm91bmRzIDogZnVuY3Rpb24obWFya2VyVmlld3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgJGRlZi50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuX2ZpdE1hcmtlckJvdW5kcyhtYXJrZXJWaWV3cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hET00oMTAwMCwnI2FydGljbGUnLCRkZWYpO1xuICAgICAgICB9XG4gICAgICAgICwgaGFuZGxlUG9wdXBQb3NpdGlvbiA6IGZ1bmN0aW9uKHBvcHVwKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgbWFwID0gdGhhdC5tYXA7XG4gICAgICAgICAgICB2YXIgaWQgPSAkKHBvcHVwLmdldENvbnRlbnQoKSkuYXR0cignaWQnKTtcbiAgICAgICAgICAgIHZhciBlZGdlUHRYLCAkcG9wdXBXcmFwLCBwb3B1cExhdExuZywgcG9wdXBSaWdodFgsIHBhZDtcbiAgICAgICAgICAgIHBvcHVwTGF0TG5nID0gcG9wdXAuZ2V0TGF0TG5nKCk7XG4gICAgICAgICAgICBpZiAocG9wdXBMYXRMbmcgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgICAgICAgZWRnZVB0WCA9IEwuRG9tVXRpbC5nZXRWaWV3cG9ydE9mZnNldChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJ0aWNsZScpKS54O1xuICAgICAgICAgICAgLy8gbWFwIHNob3VsZCBwYW4gcmlnaHQvZWFzdCBpZiB0aGUgcG9wdXAgYmFsbG9vbiBpcyBjb3ZlcmVkIGJ5IHRoZSBhcnRpY2xlO1xuICAgICAgICAgICAgLy8gcGFkIGlzIGEgc2xpZ2h0IHJlbGllZiBiZXR3ZWVuIHRoZSBwb3B1cCBhbmQgdGhlIGFydGljbGVcbiAgICAgICAgICAgICRwb3B1cFdyYXAgPSAkKCcjJyArIGlkKS5jbG9zZXN0KCcubGVhZmxldC1wb3B1cC1jb250ZW50LXdyYXBwZXInKS5maXJzdCgpO1xuICAgICAgICAgICAgcGFkID0gTC5wb2ludChwb3B1cC5vcHRpb25zLmF1dG9QYW5QYWRkaW5nQm90dG9tUmlnaHQgfHwgcG9wdXAub3B0aW9ucy5hdXRvUGFuUGFkZGluZyk7XG4gICAgICAgICAgICBwYWQgPSBwYWQgPyBwYWQueCA6IDA7XG4gICAgICAgICAgICBwb3B1cFJpZ2h0WCA9ICgkcG9wdXBXcmFwLmxlbmd0aCA+IDApIFxuICAgICAgICAgICAgICAgID8gJHBvcHVwV3JhcC5vZmZzZXQoKS5sZWZ0ICsgJHBvcHVwV3JhcC53aWR0aCgpICsgcGFkXG4gICAgICAgICAgICAgICAgOiAwO1xuICAgICAgICAgICAgaWYgKGVkZ2VQdFggIT0gMCAmJiBwb3B1cFJpZ2h0WCA+IGVkZ2VQdFggJiYgZWRnZVB0WCAhPSBtYXAuZ2V0U2l6ZSgpLngpIHtcbiAgICAgICAgICAgICAgICBtYXAucGFuQnkoW3BvcHVwUmlnaHRYIC0gZWRnZVB0WCwwXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFtYXAuZ2V0Qm91bmRzKCkuY29udGFpbnMocG9wdXAuZ2V0TGF0TG5nKCkpKSB7XG4gICAgICAgICAgICAgICAgbWFwLmNsb3NlUG9wdXAocG9wdXApO1xuICAgICAgICAgICAgICAgIG1hcC5vcGVuUG9wdXAocG9wdXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWFwUGFuQ29udHJvbGxlci5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgcmV0dXJuIE1hcFBhbkNvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvZXJyb3IvdXNlcicsIFtcbiAgICAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbihCYWNrYm9uZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVXNlckVycm9yTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgXCJtc2dcIiA6IFwiXCJcbiAgICAgICAgfSxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdGhpcy5zZXQoJ21zZycsIGFyZ3MubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9KTsgICAgXG4gICAgcmV0dXJuIFVzZXJFcnJvck1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlL2dhbGxlcnknLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3BvcG92ZXInXG4gICAgLCAndmlld3MvYXJ0aWNsZS9nYWxsZXJ5L2xpZ2h0Ym94J1xuICAgICwgJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9zbGlkZXMnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQXJ0aWNsZUdhbGxlcnlQb3BvdmVyVmlldyxBcnRpY2xlR2FsbGVyeUxpZ2h0Ym94VmlldyxBcnRpY2xlR2FsbGVyeVNsaWRlc1ZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVHYWxsZXJ5VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICBpZDogJ2FydGljbGUnXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7fVxuICAgICAgICAsIHJlbW92ZTogZnVuY3Rpb24oKSB7IC8qIHJldGFpbiAqL31cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIC8vIGFkanVzdCBoZWlnaHQgb2YgYXJ0aWNsZSBib2R5XG4gICAgICAgICAgICAvLyBUT0RPOiBoYW5kbGUgaW4gY3NzXG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gJCgnI2FydGljbGUgYXJ0aWNsZScpLmhlaWdodCgpIC0gJCgnI2hlYWRlcicpLm91dGVySGVpZ2h0KHRydWUpO1xuICAgICAgICAgICAgJCgnI2JvZHknKS5jc3Moe2hlaWdodDpoZWlnaHR9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gcmVtb3ZlIGltYWdlcyB0aGF0IGZhaWwgdG8gbG9hZCwgc2luY2Ugd2UgY2Fubm90IGRvXG4gICAgICAgICAgICAvLyBhIGZpbGUgdGVzdCB3aGVuIHJ1bm5pbmcgdGhlIHhzbFxuICAgICAgICAgICAgdmFyIGRlZnMgPSBbXTtcbiAgICAgICAgICAgICQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmVhY2goZnVuY3Rpb24oaSxpbWcpe1xuICAgICAgICAgICAgICAgIHZhciAkZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgICQoaW1nKS5sb2FkKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICQoaW1nKS5yZW1vdmVDbGFzcygncmVtb3ZlJyk7XG4gICAgICAgICAgICAgICAgICAgICRkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoaW1nKS5lcnJvcihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAvLyBhbGxvdyBzb21lIHRpbWUgYmVmb3JlIGZhaWx1cmVcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sNTAwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkZWZzLnB1c2goJGRlZik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseSh7fSxkZWZzKS5hbHdheXMoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkKCdpbWcuc2xpZGVzanMtc2xpZGUucmVtb3ZlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCgnLmltYWdlLWxvYWRpbmcnKS5yZW1vdmVDbGFzcygnaW1hZ2UtbG9hZGluZycpO1xuICAgICAgICAgICAgICAgIG5ldyBBcnRpY2xlR2FsbGVyeVBvcG92ZXJWaWV3KCkucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgbmV3IEFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3KCkucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgbmV3IEFydGljbGVHYWxsZXJ5U2xpZGVzVmlldygpLnJlbmRlcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXJ0aWNsZUdhbGxlcnlWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuLypcbiAqIFRoaXMgaXMgbWVhbnQgdG8gYmUgZXh0ZW5kZWQgYXMgYW4gYWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgdGhlXG4gKiBzZWN0aW9ucyBvZiBhbiBhcnRpY2xlLlxuICovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvbWVudScsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ3VuZGVyc2NvcmUnLCBcbiAgICAnYmFja2JvbmUnLFxuICAgICdtaXhpbnMveG1sMmh0bWwnLFxuICAgICd0ZXh0IXhzbC9hcnRpY2xlLW1lbnUueHNsJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLFhNTDJIVE1MLGFtWHNsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlTWVudVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAvLyB0aGlzIHZpZXcgaXMgbWVhbnQgdG8gYmUgY2FsbGVkIG9ubHkgYWZ0ZXIgdGhlIGNvcnJlc3BvbmRpbmdcbiAgICAgICAgICAgIC8vIGFydGljbGUgbW9kZWwgaGFzIGJlZW4gaW5pdGlhbGl6ZWRcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsLmluaXQoKS5zdGF0ZSgpICE9PSAncmVzb2x2ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJVbmluaXRpYWxpemVkIGFydGljbGUgaW4gQXJ0aWNsZU1lbnVWaWV3XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbWVudWl0ZW0gPSB0aGF0LnhtbDJodG1sKHRoYXQubW9kZWwuZ2V0KCd4bWwnKSwgYW1Yc2wsIHBhcmFtcyk7XG4gICAgICAgICAgICByZXR1cm4gbWVudWl0ZW07XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChBcnRpY2xlTWVudVZpZXcucHJvdG90eXBlLFhNTDJIVE1MKTtcbiAgICByZXR1cm4gQXJ0aWNsZU1lbnVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9lcnJvci91c2VyJywgW1xuICAgICdqcXVlcnknLCBcbiAgICAnYmFja2JvbmUnLCBcbiAgICAndGV4dCFwYXJ0aWFscy9lcnJvci91c2VyLmh0bWwnXG5dLCBmdW5jdGlvbigkLEJhY2tib25lLHRtcGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFVzZXJFcnJvclZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIHRlbXBsYXRlOiBfLnRlbXBsYXRlKHRtcGwpLFxuICAgICAgICBlbDogJCgnI2Vycm9yRGlhbG9nJyksXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlKHRoaXMubW9kZWwuYXR0cmlidXRlcykpO1xuICAgICAgICAgICAgdGhpcy4kZWwubW9kYWwoe2tleWJvYXJkOiB0cnVlLCBzaG93OiB0cnVlfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBVc2VyRXJyb3JWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9tYXAvbGF5ZXIvcGxhY2V0eXBlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2NvbnRyb2xsZXJzL3Byb3RvdHlwZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21hcmtlci1sZWdlbmQuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxDb250cm9sbGVyLGxlZ2VuZFBhcnRpYWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFBsYWNldHlwZUNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgdmlld3MgIDogbnVsbFxuICAgICAgICAsIHJvdXRlciA6IG51bGxcbiAgICAgICAgLCBtYXAgICAgOiBudWxsXG4gICAgICAgICwgY29udHJvbCA6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LnZpZXdzID0gYXJncy52aWV3cztcbiAgICAgICAgICAgIHRoYXQubWFwID0gYXJncy5tYXA7XG4gICAgICAgICAgICB0aGF0Lm1hcGNvbmZpZyA9IGFyZ3MubWFwY29uZmlnO1xuICAgICAgICAgICAgdmFyIGxlZ2VuZFRlbXBsID0gXy50ZW1wbGF0ZShsZWdlbmRQYXJ0aWFsKTtcbiAgICAgICAgICAgIHZhciBsYXllck1hcmtlcnMgPSBfLmdyb3VwQnkodGhhdC52aWV3cywgZnVuY3Rpb24obWFya2VyVmlldyl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcmtlclZpZXcubW9kZWwuZ2V0R2VvanNvbigpLnByb3BlcnRpZXMubGF5ZXI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBjb250cm9sID0gdGhhdC5jb250cm9sID0gTC5jb250cm9sLmxheWVycyhudWxsLCBudWxsLCB0aGF0Lm1hcGNvbmZpZy5jb250cm9sLmxheWVycy5vcHRpb25zKS5hZGRUbyh0aGF0Lm1hcCk7XG4gICAgICAgICAgICAvLyBkaXNhYmxlIG1vdXNlb3Zlci9tb3VzZW91dCBldmVudHMgZm9yIHRoaXMgY29udHJvbCwgd2hpY2ggYXJlIHNldCBieSBkZWZhdWx0IGluXG4gICAgICAgICAgICAvLyBMZWFmbGV0OyBlbmFibGVzICdjbGljaycgY29udHJvbFxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGNvbnRyb2wuZ2V0Q29udGFpbmVyKCk7XG4gICAgICAgICAgICBfLmZvckVhY2goT2JqZWN0LmtleXMoY29udGFpbmVyKSwgZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgICAgICAgICBpZiAoa2V5Lm1hdGNoKCdtb3VzZW92ZXInKSlcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGNvbnRhaW5lcltrZXldKTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5Lm1hdGNoKCdtb3VzZW91dCcpKVxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBjb250YWluZXJba2V5XSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGluIFNhZmFyaSwgbGF5ZXIgY29udHJvbCBidXR0b24gZG9lcyBub3QgcmVjZWl2ZSAnZm9jdXMnIGV2ZW50IG9uIGNsaWNrXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEwuRG9tRXZlbnQub24oJCgnLmxlYWZsZXQtY29udHJvbC1sYXllcnMtdG9nZ2xlJylbMF0sICdjbGljaycsIGNvbnRyb2wuX2V4cGFuZCwgY29udHJvbCk7XG4gICAgICAgICAgICBfLmVhY2goXy5rZXlzKGxheWVyTWFya2VycyksIGZ1bmN0aW9uKGxheWVyTmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciBrbGFzcyA9IGxheWVyTmFtZS5yZXBsYWNlKC9cXHMrL2csICctJyk7XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyTGVnZW5kID0gbGVnZW5kVGVtcGwoe1xuICAgICAgICAgICAgICAgICAgICAgIGljb25Vcmw6IGxheWVyTWFya2Vyc1tsYXllck5hbWVdWzBdLm1vZGVsLmdldCgnaWNvblVybCcpXG4gICAgICAgICAgICAgICAgICAgICwgdGl0bGUgIDogbGF5ZXJOYW1lXG4gICAgICAgICAgICAgICAgICAgICwga2xhc3MgIDoga2xhc3NcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VyTGF5ZXJzID0gXy5tYXAobGF5ZXJNYXJrZXJzW2xheWVyTmFtZV0sIGZ1bmN0aW9uKHZpZXcpeyByZXR1cm4gdmlldy5tYXJrZXJMYXllcjsgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyID0gTC5sYXllckdyb3VwKG1hcmtlckxheWVycyk7XG4gICAgICAgICAgICAgICAgY29udHJvbC5hZGRPdmVybGF5KGxheWVyLGxheWVyTGVnZW5kKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnaW5wdXQubGVhZmxldC1jb250cm9sLWxheWVycy1zZWxlY3RvcicpLmVhY2goZnVuY3Rpb24oaSxlbHQpIHtcbiAgICAgICAgICAgICAgICQoZWx0KS5jbGljaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250cm9sLm1hcExheWVyQ29udHJvbGxlciA9IHRoYXQ7XG4gICAgICAgICAgICBjb250cm9sLl9vbklucHV0Q2xpY2sgPSB0aGF0Ll9vbklucHV0Q2xpY2s7XG4gICAgICAgIH1cbiAgICAgICAgLCBnZXRGaWx0ZXJTdGF0ZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIHNob3c6ICh0aGlzLnNob3cgfHwgW10pXG4gICAgICAgICAgICAgICAgLCBoaWRlOiAodGhpcy5oaWRlIHx8IFtdKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBkbyBub3Qgb3ZlcnJpZGUgdGhpcyBwcml2YXRlIG1ldGhvZDsgc2FmZXIgdG8gcmVwbGFjZVxuICAgICAgICAvLyAgTC5jb250cm9sLmxheWVycygpIHdpdGggYSBjdXN0b20gY29udHJvbFxuICAgICAgICAsIF9vbklucHV0Q2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRyb2wgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHNob3cgPSBbXSwgaGlkZSA9IFtdO1xuICAgIFx0XHR2YXIgaSwgaW5wdXQsIG9iaixcbiAgICBcdFx0ICAgIGlucHV0cyA9IGNvbnRyb2wuX2Zvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0JyksXG4gICAgXHRcdCAgICBpbnB1dHNMZW4gPSBpbnB1dHMubGVuZ3RoO1xuICAgIFx0XHRjb250cm9sLl9oYW5kbGluZ0NsaWNrID0gdHJ1ZTtcbiAgICBcdFx0Zm9yIChpID0gMDsgaSA8IGlucHV0c0xlbjsgaSsrKSB7XG4gICAgXHRcdFx0aW5wdXQgPSBpbnB1dHNbaV07XG4gICAgXHRcdFx0b2JqID0gY29udHJvbC5fbGF5ZXJzW2lucHV0LmxheWVySWRdO1xuICAgIFx0XHRcdGlmIChpbnB1dC5jaGVja2VkKSB7XG4gICAgXHRcdFx0XHRvYmoubGF5ZXIuZ2V0TGF5ZXJzKCkuZm9yRWFjaChmdW5jdGlvbihsYXllcikge1xuICAgIFx0XHRcdFx0ICAgIHNob3cucHVzaChsYXllcik7XG4gICAgXHRcdFx0ICAgIH0pO1xuICAgIFx0XHRcdH0gZWxzZSB7XG4gICAgXHRcdFx0XHRvYmoubGF5ZXIuZ2V0TGF5ZXJzKCkuZm9yRWFjaChmdW5jdGlvbihsYXllcikge1xuICAgIFx0XHRcdFx0ICAgIGhpZGUucHVzaChsYXllcik7XG4gICAgXHRcdFx0ICAgIH0pO1xuICAgIFx0XHRcdH1cbiAgICBcdFx0fVxuICAgIFx0XHRjb250cm9sLl9oYW5kbGluZ0NsaWNrID0gZmFsc2U7XG4gICAgXHRcdGNvbnRyb2wuX3JlZm9jdXNPbk1hcCgpO1xuICAgIFx0XHRjb250cm9sLm1hcExheWVyQ29udHJvbGxlci5zaG93ID0gc2hvdztcbiAgICBcdFx0Y29udHJvbC5tYXBMYXllckNvbnRyb2xsZXIuaGlkZSA9IGhpZGU7XG4gICAgXHRcdGNvbnRyb2wubWFwTGF5ZXJDb250cm9sbGVyLnRyaWdnZXIoJ2ZpbHRlcicpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFBsYWNldHlwZUNvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL21hcC9sYXllci90aW1lbGluZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAndmlld3MvbWFwL2xheWVyL3RpbWVsaW5lJ1xuICAgICwgJ21vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixUaW1lbGluZVZpZXcsVGltZWxpbmVNb2RlbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwVGltZWxpbmVDb250cm9sbGVyID0gQ29udHJvbGxlci5leHRlbmQoe1xuICAgICAgICAgIG1hcCAgICA6IG51bGxcbiAgICAgICAgLCBtb2RlbCAgOiBudWxsXG4gICAgICAgICwgdmlldyAgIDogbnVsbFxuICAgICAgICAsIHNpdGVjb25maWc6IG51bGxcbiAgICAgICAgLCBtYXJrZXJWaWV3czogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQudmlld3MgPSBhcmdzLnZpZXdzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgICAgIHRoYXQubWFya2VyVmlld3MgPSBhcmdzLm1hcmtlclZpZXdzO1xuICAgICAgICAgICAgdGhhdC5tb2RlbCA9IG5ldyBUaW1lbGluZU1vZGVsKHtcbiAgICAgICAgICAgICAgICAgIHNpdGVjb25maWcgIDogYXJncy5zaXRlY29uZmlnXG4gICAgICAgICAgICAgICAgLCBtYXJrZXJWaWV3cyA6IGFyZ3MubWFya2VyVmlld3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhhdC52aWV3ID0gbmV3IFRpbWVsaW5lVmlldyh7XG4gICAgICAgICAgICAgICAgICBtb2RlbCA6IHRoYXQubW9kZWxcbiAgICAgICAgICAgICAgICAsIG1hcCAgIDogdGhhdC5tYXBcbiAgICAgICAgICAgICAgICAsIG1hcmtlclZpZXdzIDogYXJncy5tYXJrZXJWaWV3c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyByZXN1bHRzLmNsZWFyIGlzIGEgZmxhZyB0aGF0IHRoZSBicnVzaCBpcyBlbXB0eVxuICAgICAgICAgICAgLy8gcmVzdWx0cy5pbmNsIGlzIGFuIGFycmF5IG9mIE1hcFRpbWVsaW5lSXRlbSdzXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHNob3cvaGlkZSBvbiBsaXN0cyBvZiBBcnRpY2xlTW9kZWwnc1xuICAgICAgICAgICAgdGhhdC5saXN0ZW5Ubyh0aGF0LnZpZXcsICdmaWx0ZXInLCB0aGF0Ll9oYW5kbGVGaWx0ZXJFdmVudCk7XG4gICAgICAgICAgICB0aGF0LnZpZXcucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfaGFuZGxlRmlsdGVyRXZlbnQgOiBmdW5jdGlvbihyZXN1bHRzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc2hvd0xheWVycyA9IFtdLCBoaWRlTGF5ZXJzID0gW10sIHNob3dJZHMgPSB7fTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLmNsZWFyKSB7XG4gICAgICAgICAgICAgICAgc2hvd0xheWVycyA9IF8ubWFwKHRoYXQubWFya2VyVmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcmtlclZpZXcubWFya2VyTGF5ZXI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNob3dMYXllcnMgPSBfLm1hcChyZXN1bHRzLnNlbGVjdGVkLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dJZHNbaXRlbS5tYXJrZXJWaWV3Lm1vZGVsLmNpZF0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm1hcmtlclZpZXcubWFya2VyTGF5ZXI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaGlkZUxheWVycyA9IF8ubWFwKF8uZmlsdGVyKHRoYXQubWFya2VyVmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEobWFya2VyVmlldy5tb2RlbC5jaWQgaW4gc2hvd0lkcyk7XG4gICAgICAgICAgICAgICAgfSksIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcmtlclZpZXcubWFya2VyTGF5ZXI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0LnNob3cgPSBzaG93TGF5ZXJzO1xuICAgICAgICAgICAgdGhhdC5oaWRlID0gaGlkZUxheWVycztcbiAgICAgICAgICAgIHRoYXQudHJpZ2dlcignZmlsdGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgLCBnZXRGaWx0ZXJTdGF0ZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIHNob3c6ICh0aGlzLnNob3cgfHwgW10pXG4gICAgICAgICAgICAgICAgLCBoaWRlOiAodGhpcy5oaWRlIHx8IFtdKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBNYXBUaW1lbGluZUNvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvbWFwL2xheWVyL3RpbWVsaW5lJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2NvbGxlY3Rpb25zL3RpbWVsaW5lJ1xuICAgICwgJ21vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUvaXRlbSdcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLFRpbWVsaW5lQ29sbGVjdGlvbixUaW1lbGluZUl0ZW0sQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBUaW1lbGluZU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgICBtYXJrZXJWaWV3czogbnVsbFxuICAgICAgICAsIHN0YXJ0OiBudWxsXG4gICAgICAgICwgZW5kOiBudWxsXG4gICAgICAgICwgc2l0ZWNvbmZpZyA6IG51bGxcbiAgICAgICAgLCBib29rY29uZmlnIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQubWFya2VyVmlld3MgPSBhcmdzLm1hcmtlclZpZXdzO1xuICAgICAgICAgICAgdGhhdC5zaXRlY29uZmlnID0gYXJncy5zaXRlY29uZmlnO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgJC5nZXRKU09OKHRoYXQuc2l0ZWNvbmZpZy5ib29rLmZpbGUsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGF0LmJvb2tjb25maWcgPSBkYXRhLmJvb2s7XG4gICAgICAgICAgICAgICAgdGhhdC5faW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihqcXhociwgdGV4dFN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9pbml0aWFsaXplIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY29sID0gbmV3IFRpbWVsaW5lQ29sbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhhdC5zZXQoJ2NvbGxlY3Rpb24nLCBjb2wpO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQubWFya2VyVmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSBtYXJrZXJWaWV3Lm1vZGVsO1xuICAgICAgICAgICAgICAgIHZhciBib29rQ2hhcHRlciA9IF8uZmluZFdoZXJlKHRoYXQuYm9va2NvbmZpZy5jaGFwdGVycywge1xuICAgICAgICAgICAgICAgICAgICAgIHBhcnQgICAgOiBtb2RlbC5hdHRyaWJ1dGVzLmNpdGVkUmFuZ2UucGFydFxuICAgICAgICAgICAgICAgICAgICAsIGNoYXB0ZXIgOiBtb2RlbC5hdHRyaWJ1dGVzLmNpdGVkUmFuZ2UuY2hhcHRlclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghYm9va0NoYXB0ZXIpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBib29rQ2hhcHRlci5wYXJhZ3JhcGhzLnN0YXJ0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICsgbW9kZWwuYXR0cmlidXRlcy5jaXRlZFJhbmdlLnBhcmFncmFwaDtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gc3RhcnQgKyAxO1xuICAgICAgICAgICAgICAgIGNvbC5hZGQobmV3IFRpbWVsaW5lSXRlbSh7XG4gICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0XG4gICAgICAgICAgICAgICAgICAgICwgZW5kOiBlbmRcbiAgICAgICAgICAgICAgICAgICAgLCBtYXJrZXJWaWV3OiBtYXJrZXJWaWV3XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0LnN0YXJ0ID0gXy5taW4odGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzLCBmdW5jdGlvbihjaGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYXB0ZXIucGFyYWdyYXBocy5zdGFydDtcbiAgICAgICAgICAgIH0pLnBhcmFncmFwaHMuc3RhcnQ7XG4gICAgICAgICAgICB0aGF0LmVuZCA9IF8ubWF4KHRoYXQuYm9va2NvbmZpZy5jaGFwdGVycywgZnVuY3Rpb24oY2hhcHRlcil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYXB0ZXIucGFyYWdyYXBocy5lbmQ7XG4gICAgICAgICAgICB9KS5wYXJhZ3JhcGhzLmVuZDtcbiAgICAgICAgfVxuICAgICAgICAsIGdldEl0ZW1zIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2NvbGxlY3Rpb24nKS5tb2RlbHM7XG4gICAgICAgIH1cbiAgICAgICAgLCB0aWNrVmFsdWVzIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gXy5tYXAodGhpcy5ib29rY29uZmlnLmNoYXB0ZXJzLCBmdW5jdGlvbihjaGFwdGVyKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcHRlci5wYXJhZ3JhcGhzLnN0YXJ0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YWx1ZXMuc29ydChmdW5jdGlvbihhLGIpIHsgcmV0dXJuIGEtYjsgfSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9XG4gICAgICAgICwgdGlja0Zvcm1hdCA6IGZ1bmN0aW9uKHApIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgaSxjaGFwdGVyO1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGF0LmJvb2tjb25maWcuY2hhcHRlcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhcHRlciA9IHRoYXQuYm9va2NvbmZpZy5jaGFwdGVyc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAgPD0gY2hhcHRlci5wYXJhZ3JhcGhzLmVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGNoYXB0ZXIuY2hhcHRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJsYW5rIHRpY2sgZm9yIGVuZCBvZiBib29rXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocCA9PT0gdGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcblxuICAgICAgICAgICAgXy5maW5kSW5kZXgodGhpcy5nZXQoJ2NvbGxlY3Rpb24nKS5tb2RlbHMsIGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgIHJldHVybiAoaXRlbS5jaWQgPT09IHRpbWVsaW5lSXRlbS5jaWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWkpIHJldHVybjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldCgnY29sbGVjdGlvbicpLmdldChpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKFRpbWVsaW5lTW9kZWwucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIFRpbWVsaW5lTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9saWdodGJveCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2xpZ2h0Ym94LXRpdGxlLmh0bWwnXG4gICAgLCAnbGlnaHRib3gnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsbGlnaHRib3hUaXRsZVRlbXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlR2FsbGVyeUxpZ2h0Ym94VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICBpZDogJ2FydGljbGUnXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7fVxuICAgICAgICAsIHJlbW92ZTogZnVuY3Rpb24oKSB7IC8qIHJldGFpbiAqL31cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICQoJy5nYWxsZXJ5LWl0ZW0nKS5tYWduaWZpY1BvcHVwKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgICAgICAgIGdhbGxlcnk6e1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZVNyYzogZnVuY3Rpb24oJGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9ICRpdGVtLmVsLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHBvID0gJCgnLnBvcG92ZXIuJyArIGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwY3QgPSBfLnRlbXBsYXRlKGxpZ2h0Ym94VGl0bGVUZW1wbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHBjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICRwby5maW5kKCcuaGVhZCcpLnRleHQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyOiAkcG8uZmluZCgnLmF0dHInKS50ZXh0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoJy5nbHlwaGljb24uZ2x5cGhpY29uLWV4cGFuZCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCl7XG4gICAgICAgICAgICAgICAgJCgnLmdhbGxlcnktaXRlbScpLm1hZ25pZmljUG9wdXAoJ29wZW4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXJ0aWNsZUdhbGxlcnlMaWdodGJveFZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9wb3BvdmVyJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci5odG1sJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci1jb250ZW50Lmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUscG9wb3ZlclRlbXBsLHBvcG92ZXJDb250ZW50VGVtcGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVHYWxsZXJ5UG9wb3ZlclZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgaWQ6ICdhcnRpY2xlJ1xuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge31cbiAgICAgICAgLCByZW1vdmU6IGZ1bmN0aW9uKCkgeyAvKiByZXRhaW4gKi99XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAvLyBhZGQgcG9wb3ZlcnMgdG8gaW1hZ2VzXG4gICAgICAgICAgICB2YXIgcGN0ID0gXy50ZW1wbGF0ZShwb3BvdmVyQ29udGVudFRlbXBsKTtcbiAgICAgICAgICAgICQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmVhY2goZnVuY3Rpb24oaSxlbHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBlbHQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgIHZhciAkcG8gPSAkKCcucG9wb3Zlci4nICsgaWQpO1xuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9ICRwby5maW5kKCcuaGVhZCcpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAkKGVsdCkuYXR0cignYWx0JywgJHBvLmZpbmQoJy5kZXNjJykudGV4dCgpKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHBjdCh7XG4gICAgICAgICAgICAgICAgICAgIGF0dHI6ICRwby5maW5kKCcuYXR0cicpLnRleHQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoZWx0KS5wb3BvdmVyKHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBcImJvZHlcIixcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHBvcG92ZXJUZW1wbCxcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogXCJob3ZlclwiLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6IFwibGVmdFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChlbHQpLmNsaWNrKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAkKGVsdCkucG9wb3ZlcignaGlkZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcnRpY2xlR2FsbGVyeVBvcG92ZXJWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvc2xpZGVzJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci5odG1sJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci1jb250ZW50Lmh0bWwnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9saWdodGJveC10aXRsZS5odG1sJ1xuICAgICwgJ3NsaWRlc2pzJ1xuICAgICwgJ2xpZ2h0Ym94J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHBvcG92ZXJUZW1wbCxwb3BvdmVyQ29udGVudFRlbXBsLGxpZ2h0Ym94VGl0bGVUZW1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAnYXJ0aWNsZSdcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbigpIHt9XG4gICAgICAgICwgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gY29uZmlndXJlIHNsaWRlc2pzOyB1cCB0byBub3csICdkaXNwbGF5Om5vbmUnXG4gICAgICAgICAgICAvLyBoYXMgYXBwbGllZFxuICAgICAgICAgICAgJChcIiNzbGlkZXNcIikuc2xpZGVzanMoe1xuICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAoJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID4gMSksXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogXCJmYWRlXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAoJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID4gMSksXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogXCJmYWRlXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVmZmVjdDoge1xuICAgICAgICAgICAgICAgICAgICBmYWRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICBjcm9zc2ZhZGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIG9uIGxvYWQgb2YgZmlyc3QgcGljXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlZDogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGltZyA9ICQoXCIuc2xpZGVzanMtY29udHJvbFwiKS5jaGlsZHJlbignOmVxKCcrIChudW1iZXIgLSAxKSArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7dmlzaWJpbGl0eTogXCJoaWRkZW5cIn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHdpZHRoOiAgJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXhIZWlnaHQ6ICQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXhXaWR0aDogICQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLndpZHRoKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHBvc2l0aW9uOiAgXCJyZWxhdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBsZWZ0IG9mZnNldCBvbmNlIHRoZSBwcmV2aW91cyBwcm9wZXJ0aWVzIGhhdmUgYmVlbiBzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgICA6ICgkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS53aWR0aCgpIC0gJGltZy53aWR0aCgpKS8yIC0gcGFyc2VJbnQoJGltZy5jc3MoJ3BhZGRpbmctbGVmdCcpLCAxMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1hcmdpbiA6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3MoeyB2aXNpYmlsaXR5OiBcInZpc2libGVcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIHN0YXJ0IG9mIGNoYW5nZSBvZiBwaWMgKGFmdGVyIGZpcnN0KVxuICAgICAgICAgICAgICAgICAgICBzdGFydDogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnNsaWRlc2pzLWNvbnRyb2xcIikuY2hpbGRyZW4oKS5jc3Moe3Zpc2liaWxpdHk6IFwiaGlkZGVuXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIGVuZCBvZiBjaGFuZ2Ugb2YgcGljIChhZnRlciBmaXJzdClcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0ltZyA9IG51bWJlciAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGltZyA9ICQoXCIuc2xpZGVzanMtY29udHJvbFwiKS5jaGlsZHJlbignOmVxKCcrIG5ld0ltZyArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgd2lkdGg6ICAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heEhlaWdodDogJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heFdpZHRoOiAgJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikud2lkdGgoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgcG9zaXRpb246ICBcInJlbGF0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3MoeyB2aXNpYmlsaXR5OiBcInZpc2libGVcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tYXAvbGF5ZXIvdGltZWxpbmUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbGVhZmxldCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL3RpbWVsaW5lLmh0bWwnXG4gICAgLCAnY29udHJvbHMvTC5Db250cm9sLlRpbWVsaW5lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEwsdGltZWxpbmVDb250cm9sUGFydGlhbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVGltZWxpbmVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAndGltZWxpbmUnXG4gICAgICAgICwgbWFwOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgfVxuICAgICAgICAsIF90aW1lbGluZUNvbGxhcHNlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Ll9oYW5kbGVGaWx0ZXIoe2NsZWFyOnRydWV9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9oYW5kbGVGaWx0ZXIgOiBmdW5jdGlvbihzZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdmaWx0ZXInLCBzZWxlY3RlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uLCBjb250cm9saGVpZ2h0LCBtYXBoZWlnaHQsIGRvY3VtZW50aGVpZ2h0O1xuICAgICAgICAgICAgbWFwaGVpZ2h0ID0gJCgnI21hcCcpLmhlaWdodCgpO1xuICAgICAgICAgICAgZG9jdW1lbnRoZWlnaHQgPSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkb2N1bWVudGhlaWdodC8yIC0gbWFwaGVpZ2h0KSA8IDIpIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICdib3R0b21yaWdodCc7XG4gICAgICAgICAgICAgICAgY29udHJvbGhlaWdodCA9ICQoJyNtYXAnKS5oZWlnaHQoKSAtIDEwMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSAndG9wbGVmdCc7XG4gICAgICAgICAgICAgICAgY29udHJvbGhlaWdodCA9IDUwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoYXQubW9kZWwuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC50aW1lbGluZSA9IEwuY29udHJvbC50aW1lbGluZSh0aGF0Lm1hcCx0aGF0Lm1vZGVsLFxuICAgICAgICAgICAgICAgICAgICB7ICAgICBoZWlnaHQgICA6IGNvbnRyb2xoZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgICwgcG9zaXRpb24gOiBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgLCBvbjogeyBicnVzaGVuZDogZnVuY3Rpb24oYSkgeyB0aGF0Ll9oYW5kbGVGaWx0ZXIoYSk7IH19fVxuICAgICAgICAgICAgICAgICkuYWRkVG8odGhhdC5tYXApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gVGltZWxpbmVWaWV3O1xufSk7XG5cbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvbWFwL2xheWVyL3RpbWVsaW5lL2l0ZW0nLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFRpbWVsaW5lSXRlbU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgICBtYXJrZXJWaWV3OiBudWxsXG4gICAgICAgICwgc3RhcnQ6IG51bGwgICAgICAgLy8gXCJhYnNvbHV0ZVwiIHN0YXJ0IChpZSwgcGFyYWdyYXBoIGluZGV4IHcvbyBjaGFwdGVyKVxuICAgICAgICAsIGVuZDogbnVsbCAgICAgICAgIC8vIFwiYWJzb2x1dGVcIiBlbmRcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1hcmtlclZpZXcgPSBhcmdzLm1hcmtlclZpZXc7XG4gICAgICAgICAgICB0aGF0LnN0YXJ0ID0gYXJncy5zdGFydDtcbiAgICAgICAgICAgIHRoYXQuZW5kID0gYXJncy5lbmQ7XG4gICAgICAgIH1cbiAgICAgICAgLCBkdXJhdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmQtdGhpcy5zdGFydDtcbiAgICAgICAgfVxuICAgICAgICAsIGNvbXBhcmVUbzogZnVuY3Rpb24oYikge1xuICAgICAgICAgICAgcmV0dXJuIFxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFRpbWVsaW5lSXRlbU1vZGVsO1xufSk7XG4iLCJyZXF1aXJlLmNvbmZpZyh7XG4gIHBhdGhzOiB7XG4gICAgICBiYWNrYm9uZSAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvYmFja2JvbmUuanMvMS4xLjIvYmFja2JvbmUtbWluJ1xuICAgICwgYm9vdHN0cmFwIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3R3aXR0ZXItYm9vdHN0cmFwLzMuMy41L2pzL2Jvb3RzdHJhcC5taW4nXG4gICAgLCBkMyAgICAgICAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZDMvMy41LjYvZDMubWluJ1xuICAgICwganF1ZXJ5ICAgIDogJy8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0yLjEuNC5taW4nXG4gICAgLCBsZWFmbGV0ICAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0J1xuICAgICwgbGlnaHRib3ggIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL21hZ25pZmljLXBvcHVwLmpzLzEuMC4wL2pxdWVyeS5tYWduaWZpYy1wb3B1cC5taW4nXG4gICAgLCBzbGlkZXNqcyAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvc2xpZGVzanMvMy4wL2pxdWVyeS5zbGlkZXMubWluJ1xuICAgICwgdGV4dCAgICAgIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3JlcXVpcmUtdGV4dC8yLjAuMTIvdGV4dC5taW4nXG4gICAgLCB1bmRlcnNjb3JlOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvdW5kZXJzY29yZS5qcy8xLjguMy91bmRlcnNjb3JlLW1pbidcbiAgICAsIHBhcnRpYWxzICA6ICcuLi9wYXJ0aWFscydcbiAgICAsIHhzbCAgICAgICA6ICcuLi9zY3JpcHQveHNsJ1xuICAgICwgcGFnZXMgICAgIDogJy4uL3BhZ2VzJ1xuICB9LFxuICBzaGltOiB7XG4gICAgYm9vdHN0cmFwOiB7XG4gICAgICBkZXBzOiBbJ2pxdWVyeSddXG4gICAgfSxcbiAgICBiYWNrYm9uZToge1xuICAgICAgICAnZGVwcyc6IFsnanF1ZXJ5JywgJ3VuZGVyc2NvcmUnXSxcbiAgICAgICAgJ2V4cG9ydHMnOiAnQmFja2JvbmUnXG4gICAgfSxcbiAgICB1bmRlcnNjb3JlOiB7XG4gICAgICAgICdleHBvcnRzJzogJ18nXG4gICAgfSxcbiAgICB0ZXh0OiB7XG4gICAgICAgICdkZXBzJzogW11cbiAgICB9LFxuICAgIHNsaWRlc2pzOiB7XG4gICAgICAgIGRlcHM6IFsnanF1ZXJ5J11cbiAgICB9LFxuICAgIGxpZ2h0Ym94OiB7XG4gICAgICBkZXBzOiBbJ2pxdWVyeSddXG4gICAgfVxuICB9XG59KTtcbnJlcXVpcmUoW1xuICAgICdqcXVlcnknLFxuICAgICdtb2RlbHMvZXJyb3IvdXNlcicsXG4gICAgJ3ZpZXdzL2Vycm9yL3VzZXInLFxuICAgICdyb3V0ZXMvcm91dGVyJyxcbiAgICAndmlld3MvYXBwJyxcbiAgICAnYm9vdHN0cmFwJ1xuXSwgZnVuY3Rpb24oJCxVc2VyRXJyb3JNb2RlbCxVc2VyRXJyb3JWaWV3LFJvdXRlcixBcHBWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBjb25maWdmaWxlID0gJCgnI21haW4nKS5hdHRyKCdkYXRhLWNvbmZpZycpO1xuICAgIGlmIChjb25maWdmaWxlKSB7XG4gICAgICAgICQuZ2V0SlNPTihjb25maWdmaWxlLCBmdW5jdGlvbihzaXRlY29uZmlnKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG5ldyBBcHBWaWV3KCk7XG4gICAgICAgICAgICAgICAgbmV3IFJvdXRlcih7XG4gICAgICAgICAgICAgICAgICAgICAgcm91dGVzOiBzaXRlY29uZmlnLnBhZ2VzLnJvdXRlc1xuICAgICAgICAgICAgICAgICAgICAsIGNvbmZpZzogc2l0ZWNvbmZpZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmICghc2l0ZWNvbmZpZy5kZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICBuZXcgVXNlckVycm9yVmlldyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogbmV3IFVzZXJFcnJvck1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2c6IGUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxeGhyLCB0ZXh0U3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgbmV3IFVzZXJFcnJvclZpZXcoe1xuICAgICAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICBtc2c6IFwiRmFpbGVkIHRvIGxvYWQgc2l0ZSBjb25maWcgZmlsZSAnXCIgKyBjb25maWdmaWxlICsgXCInIFwiICsgZXJyb3JcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHtcbiAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgIG1zZzogXCJObyBjb25maWd1cmF0aW9uIGZpbGVuYW1lIHNwZWNpZmllZCBpbiBob21lIHBhZ2UuXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9